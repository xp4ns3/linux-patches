

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Remote Controller devices &mdash; The Linux Kernel 5.18.0-rc1-torvalds+ documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/theme_rtd_colors.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="The Linux Kernel 5.18.0-rc1-torvalds+ documentation" href="../../index.html"/>
        <link rel="up" title="Media subsystem kernel internal API" href="index.html"/>
        <link rel="next" title="5. Media Controller devices" href="mc-core.html"/>
        <link rel="prev" title="3.5. Digital TV Network kABI" href="dtv-net.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.18.0-rc2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Linux driver implementer’s API guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../driver-model/index.html">Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics.html">Driver Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../infrastructure.html">Device drivers infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ioctl.html">ioctl based interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../early-userspace/index.html">Early Userspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">CPU and Device Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clk.html">The Common Clk Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device-io.html">Bus-Independent Device Accesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dma-buf.html">Buffer Sharing and Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device_link.html">Device links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../component.html">Component Helper for Aggregate Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../message-based.html">Message-based devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../infiniband.html">InfiniBand and Remote DMA (RDMA) Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frame-buffer.html">Frame Buffer Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../regulator.html">Voltage and current regulator API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reset.html">Reset controller API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../input.html">Input Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usb/index.html">Linux USB API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firewire.html">Firewire (IEEE 1394) driver Interface Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pci/index.html">The Linux PCI driver implementer’s API guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cxl/index.html">Compute Express Link</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spi.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i2c.html">I<sup>2</sup>C and SMBus Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ipmi.html">The Linux IPMI Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../i3c/index.html">I3C subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interconnect.html">Generic System Interconnect Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devfreq.html">Device Frequency Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hsi.html">High Speed Synchronous Serial Interface (HSI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edac.html">Error Detection And Correction (EDAC) Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scsi.html">SCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../libata.html">libATA Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../target.html">target and iSCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mailbox.html">The Common Mailbox Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtdnand.html">MTD NAND Driver Programming Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html">Parallel Port Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html#x50-uart-driver">16x50 UART Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../miscellaneous.html#pulse-width-modulation-pwm">Pulse-Width Modulation (PWM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mei/index.html">Intel(R) Management Engine Interface (Intel(R) MEI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mtd/index.html">Memory Technology Device (MTD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mmc/index.html">MMC/SD/SDIO card support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nvdimm/index.html">Non-Volatile Memory Device (NVDIMM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../w1.html">W1: Dallas’ 1-wire bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapidio/index.html">The Linux RapidIO Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../s390-drivers.html">Writing s390 channel device drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vme.html">VME Device Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../80211/index.html">Linux 802.11 Driver Developer’s Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../uio-howto.html">The Userspace I/O HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware/index.html">Linux Firmware API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pin-control.html">PINCTRL (PIN CONTROL) subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html">General Purpose Input/Output (GPIO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../md/index.html">RAID</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Media subsystem kernel internal API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="maintainer-entry-profile.html">1. Media Subsystem Profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="v4l2-core.html">2. Video4Linux devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="dtv-core.html">3. Digital TV (DVB) devices</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">4. Remote Controller devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#remote-controller-core">4.1. Remote Controller core</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="mc-core.html">5. Media Controller devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="cec-core.html">6. CEC Kernel Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="tx-rx.html">7. Pixel data transmitter and receiver drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera-sensor.html">8. Writing camera sensor drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="drivers/index.html">9. Media driver-specific documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../misc_devices.html">Miscellaneous Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfc/index.html">Near Field Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dmaengine/index.html">DMAEngine documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../slimbus.html">Linux kernel SLIMbus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../soundwire/index.html">SoundWire Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thermal/index.html">Thermal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fpga/index.html">FPGA Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auxiliary_bus.html">Auxiliary Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../backlight/lp855x-driver.html">Kernel driver lp855x</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connector.html">Kernel Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../console.html">Console Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dcdbas.html">Dell Systems Management Base Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../eisa.html">EISA bus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../isa.html">ISA Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../isapnp.html">ISA Plug &amp; Play support by Jaroslav Kysela &lt;perex&#64;suse.cz&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io-mapping.html">The io_mapping functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io_ordering.html">Ordering I/O writes to memory-mapped addresses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generic-counter.html">Generic Counter Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../memory-devices/index.html">Memory Controller drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../men-chameleon-bus.html">MEN Chameleon Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ntb.html">NTB Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nvmem.html">NVMEM Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parport-lowlevel.html">PARPORT interface documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pps.html">PPS - Pulse Per Second</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ptp.html">PTP hardware clock infrastructure for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../phy/index.html">Generic PHY Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pwm.html">Pulse Width Modulation (PWM) interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pldmfw/index.html">PLDM Firmware Flash Update Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pldmfw/index.html#overview-of-the-pldmfw-library">Overview of the <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rfkill.html">rfkill - RF kill switch support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial/index.html">Support for Serial devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sm501.html">SM501 Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../surface_aggregator/index.html">Surface System Aggregator Module (SSAM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../switchtec.html">Linux Switchtec Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync_file.html">Sync File API Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vfio-mediated-device.html">VFIO Mediated devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vfio.html">VFIO - “Virtual Function I/O” </a></li>
<li class="toctree-l2"><a class="reference internal" href="../vfio-pci-device-specific-driver-acceptance.html">Acceptance criteria for vfio-pci device specific driver variants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xilinx/index.html">Xilinx FPGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xillybus.html">Xillybus driver for generic FPGA interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zorro.html">Writing Device Drivers for Zorro Devices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tty/index.html">TTY</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../peci/index.html">Linux PECI Subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Kernel tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">The Linux driver implementer’s API guide</a> &raquo;</li>
        
          <li><a href="index.html">Media subsystem kernel internal API</a> &raquo;</li>
        
      <li>4. Remote Controller devices</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/driver-api/media/rc-core.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="remote-controller-devices">
<h1>4. Remote Controller devices<a class="headerlink" href="#remote-controller-devices" title="Permalink to this headline">¶</a></h1>
<div class="section" id="remote-controller-core">
<h2>4.1. Remote Controller core<a class="headerlink" href="#remote-controller-core" title="Permalink to this headline">¶</a></h2>
<p>The remote controller core implements infrastructure to receive and send
remote controller keyboard keystrokes and mouse events.</p>
<p>Every time a key is pressed on a remote controller, a scan code is produced.
Also, on most hardware, keeping a key pressed for more than a few dozens of
milliseconds produce a repeat key event. That’s somewhat similar to what
a normal keyboard or mouse is handled internally on Linux<a class="footnote-reference" href="#f1" id="id1">[1]</a>. So, the
remote controller core is implemented on the top of the linux input/evdev
interface.</p>
<table class="docutils footnote" frame="void" id="f1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>The main difference is that, on keyboard events, the keyboard controller
produces one event for a key press and another one for key release. On
infrared-based remote controllers, there’s no key release event. Instead,
an extra code is produced to indicate key repeats.</td></tr>
</tbody>
</table>
<p>However, most of the remote controllers use infrared (IR) to transmit signals.
As there are several protocols used to modulate infrared signals, one
important part of the core is dedicated to adjust the driver and the core
system to support the infrared protocol used by the emitter.</p>
<p>The infrared transmission is done by blinking a infrared emitter using a
carrier. The carrier can be switched on or off by the IR transmitter
hardware. When the carrier is switched on, it is called <em>PULSE</em>.
When the carrier is switched off, it is called <em>SPACE</em>.</p>
<p>In other words, a typical IR transmission can be viewed as a sequence of
<em>PULSE</em> and <em>SPACE</em> events, each with a given duration.</p>
<p>The carrier parameters (frequency, duty cycle) and the intervals for
<em>PULSE</em> and <em>SPACE</em> events depend on the protocol.
For example, the NEC protocol uses a carrier of 38kHz, and transmissions
start with a 9ms <em>PULSE</em> and a 4.5ms SPACE. It then transmits 16 bits of
scan code, being 8 bits for address (usually it is a fixed number for a
given remote controller), followed by 8 bits of code. A bit “1” is modulated
with 560µs <em>PULSE</em> followed by 1690µs <em>SPACE</em> and a bit “0”  is modulated
with 560µs <em>PULSE</em> followed by 560µs <em>SPACE</em>.</p>
<p>At receiver, a simple low-pass filter can be used to convert the received
signal in a sequence of <em>PULSE/SPACE</em> events, filtering out the carrier
frequency. Due to that, the receiver doesn’t care about the carrier’s
actual frequency parameters: all it has to do is to measure the amount
of time it receives <em>PULSE/SPACE</em> events.
So, a simple IR receiver hardware will just provide a sequence of timings
for those events to the Kernel. The drivers for hardware with such kind of
receivers are identified by  <code class="docutils literal notranslate"><span class="pre">RC_DRIVER_IR_RAW</span></code>, as defined by
<a class="reference internal" href="#c.rc_driver_type" title="rc_driver_type"><code class="xref c c-type docutils literal notranslate"><span class="pre">rc_driver_type</span></code></a><a class="footnote-reference" href="#f2" id="id2">[2]</a>. Other hardware come with a
microcontroller that decode the <em>PULSE/SPACE</em> sequence and return scan
codes to the Kernel. Such kind of receivers are identified
by <code class="docutils literal notranslate"><span class="pre">RC_DRIVER_SCANCODE</span></code>.</p>
<table class="docutils footnote" frame="void" id="f2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>The RC core also supports devices that have just IR emitters,
without any receivers. Right now, all such devices work only in
raw TX mode. Such kind of hardware is identified as
<code class="docutils literal notranslate"><span class="pre">RC_DRIVER_IR_RAW_TX</span></code>.</td></tr>
</tbody>
</table>
<p>When the RC core receives events produced by <code class="docutils literal notranslate"><span class="pre">RC_DRIVER_IR_RAW</span></code> IR
receivers, it needs to decode the IR protocol, in order to obtain the
corresponding scan code. The protocols supported by the RC core are
defined at enum <code class="xref c c-type docutils literal notranslate"><span class="pre">rc_proto</span></code>.</p>
<p>When the RC code receives a scan code (either directly, by a driver
of the type <code class="docutils literal notranslate"><span class="pre">RC_DRIVER_SCANCODE</span></code>, or via its IR decoders), it needs
to convert into a Linux input event code. This is done via a mapping
table.</p>
<p>The Kernel has support for mapping tables available on most media
devices. It also supports loading a table in runtime, via some
sysfs nodes. See the <a class="reference internal" href="../../userspace-api/media/rc/rc-intro.html#remote-controllers-intro"><span class="std std-ref">RC userspace API</span></a>
for more details.</p>
<div class="section" id="remote-controller-data-structures-and-functions">
<h3>4.1.1. Remote controller data structures and functions<a class="headerlink" href="#remote-controller-data-structures-and-functions" title="Permalink to this headline">¶</a></h3>
<dl class="type">
<dt id="c.rc_driver_type">
enum <code class="descname">rc_driver_type</code><a class="headerlink" href="#c.rc_driver_type" title="Permalink to this definition">¶</a></dt>
<dd><p>type of the RC driver.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">RC_DRIVER_SCANCODE</span></code></dt>
<dd>Driver or hardware generates a scancode.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RC_DRIVER_IR_RAW</span></code></dt>
<dd>Driver or hardware generates pulse/space sequences.
It needs a Infra-Red pulse/space decoder</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RC_DRIVER_IR_RAW_TX</span></code></dt>
<dd>Device transmitter only,
driver requires pulse/space data sequence.</dd>
</dl>
<dl class="type">
<dt id="c.rc_scancode_filter">
struct <code class="descname">rc_scancode_filter</code><a class="headerlink" href="#c.rc_scancode_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter scan codes.</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rc_scancode_filter {
  u32 data;
  u32 mask;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code></dt>
<dd>Scancode data to match.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask</span></code></dt>
<dd>Mask of bits of scancode to compare.</dd>
</dl>
<dl class="type">
<dt id="c.rc_filter_type">
enum <code class="descname">rc_filter_type</code><a class="headerlink" href="#c.rc_filter_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter type constants.</p>
</dd></dl>

<p><strong>Constants</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">RC_FILTER_NORMAL</span></code></dt>
<dd>Filter for normal operation.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RC_FILTER_WAKEUP</span></code></dt>
<dd>Filter for waking from suspend.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RC_FILTER_MAX</span></code></dt>
<dd>Number of filter types.</dd>
</dl>
<dl class="type">
<dt id="c.lirc_fh">
struct <code class="descname">lirc_fh</code><a class="headerlink" href="#c.lirc_fh" title="Permalink to this definition">¶</a></dt>
<dd><p>represents an open lirc file</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct lirc_fh {
  struct list_head list;
  struct rc_dev *rc;
  int carrier_low;
  unsigned int *rawir;
  struct lirc_scancode *scancodes;
  wait_queue_head_t wait_poll;
  u8 send_mode;
  u8 rec_mode;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">list</span></code></dt>
<dd>list of open file handles</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rc</span></code></dt>
<dd>rcdev for this lirc chardev</dd>
<dt><code class="docutils literal notranslate"><span class="pre">carrier_low</span></code></dt>
<dd>when setting the carrier range, first the low end must be
set with an ioctl and then the high end with another ioctl</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rawir</span></code></dt>
<dd>queue for incoming raw IR</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scancodes</span></code></dt>
<dd>queue for incoming decoded scancodes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wait_poll</span></code></dt>
<dd>poll struct for lirc device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">send_mode</span></code></dt>
<dd>lirc mode for sending, either LIRC_MODE_SCANCODE or
LIRC_MODE_PULSE</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rec_mode</span></code></dt>
<dd>lirc mode for receiving, either LIRC_MODE_SCANCODE or
LIRC_MODE_MODE2</dd>
</dl>
<dl class="type">
<dt id="c.rc_dev">
struct <code class="descname">rc_dev</code><a class="headerlink" href="#c.rc_dev" title="Permalink to this definition">¶</a></dt>
<dd><p>represents a remote control device</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rc_dev {
  struct device                   dev;
  bool managed_alloc;
  const struct attribute_group    *sysfs_groups[5];
  const char                      *device_name;
  const char                      *input_phys;
  struct input_id                 input_id;
  const char                      *driver_name;
  const char                      *map_name;
  struct rc_map                   rc_map;
  struct mutex                    lock;
  unsigned int                    minor;
  struct ir_raw_event_ctrl        *raw;
  struct input_dev                *input_dev;
  enum rc_driver_type             driver_type;
  bool idle;
  bool encode_wakeup;
  u64 allowed_protocols;
  u64 enabled_protocols;
  u64 allowed_wakeup_protocols;
  enum rc_proto                   wakeup_protocol;
  struct rc_scancode_filter       scancode_filter;
  struct rc_scancode_filter       scancode_wakeup_filter;
  u32 scancode_mask;
  u32 users;
  void *priv;
  spinlock_t keylock;
  bool keypressed;
  unsigned long                   keyup_jiffies;
  struct timer_list               timer_keyup;
  struct timer_list               timer_repeat;
  u32 last_keycode;
  enum rc_proto                   last_protocol;
  u64 last_scancode;
  u8 last_toggle;
  u32 timeout;
  u32 min_timeout;
  u32 max_timeout;
  u32 rx_resolution;
  u32 tx_resolution;
#ifdef CONFIG_LIRC;
  struct device                   lirc_dev;
  struct cdev                     lirc_cdev;
  ktime_t gap_start;
  spinlock_t lirc_fh_lock;
  struct list_head                lirc_fh;
#endif;
  bool registered;
  int (*change_protocol)(struct rc_dev *dev, u64 *rc_proto);
  int (*open)(struct rc_dev *dev);
  void (*close)(struct rc_dev *dev);
  int (*s_tx_mask)(struct rc_dev *dev, u32 mask);
  int (*s_tx_carrier)(struct rc_dev *dev, u32 carrier);
  int (*s_tx_duty_cycle)(struct rc_dev *dev, u32 duty_cycle);
  int (*s_rx_carrier_range)(struct rc_dev *dev, u32 min, u32 max);
  int (*tx_ir)(struct rc_dev *dev, unsigned *txbuf, unsigned n);
  void (*s_idle)(struct rc_dev *dev, bool enable);
  int (*s_wideband_receiver)(struct rc_dev *dev, int enable);
  int (*s_carrier_report) (struct rc_dev *dev, int enable);
  int (*s_filter)(struct rc_dev *dev, struct rc_scancode_filter *filter);
  int (*s_wakeup_filter)(struct rc_dev *dev, struct rc_scancode_filter *filter);
  int (*s_timeout)(struct rc_dev *dev, unsigned int timeout);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt>
<dd>driver model’s view of this device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">managed_alloc</span></code></dt>
<dd>devm_rc_allocate_device was used to create rc_dev</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sysfs_groups</span></code></dt>
<dd>sysfs attribute groups</dd>
<dt><code class="docutils literal notranslate"><span class="pre">device_name</span></code></dt>
<dd>name of the rc child device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">input_phys</span></code></dt>
<dd>physical path to the input child device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">input_id</span></code></dt>
<dd>id of the input child device (struct input_id)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">driver_name</span></code></dt>
<dd>name of the hardware driver which registered this device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">map_name</span></code></dt>
<dd>name of the default keymap</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rc_map</span></code></dt>
<dd>current scan/key table</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lock</span></code></dt>
<dd>used to ensure we’ve filled in all protocol details before
anyone can call show_protocols or store_protocols</dd>
<dt><code class="docutils literal notranslate"><span class="pre">minor</span></code></dt>
<dd>unique minor remote control device number</dd>
<dt><code class="docutils literal notranslate"><span class="pre">raw</span></code></dt>
<dd>additional data for raw pulse/space devices</dd>
<dt><code class="docutils literal notranslate"><span class="pre">input_dev</span></code></dt>
<dd>the input child device used to communicate events to userspace</dd>
<dt><code class="docutils literal notranslate"><span class="pre">driver_type</span></code></dt>
<dd>specifies if protocol decoding is done in hardware or software</dd>
<dt><code class="docutils literal notranslate"><span class="pre">idle</span></code></dt>
<dd>used to keep track of RX state</dd>
<dt><code class="docutils literal notranslate"><span class="pre">encode_wakeup</span></code></dt>
<dd>wakeup filtering uses IR encode API, therefore the allowed
wakeup protocols is the set of all raw encoders</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allowed_protocols</span></code></dt>
<dd>bitmask with the supported RC_PROTO_BIT_* protocols</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enabled_protocols</span></code></dt>
<dd>bitmask with the enabled RC_PROTO_BIT_* protocols</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allowed_wakeup_protocols</span></code></dt>
<dd>bitmask with the supported RC_PROTO_BIT_* wakeup
protocols</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wakeup_protocol</span></code></dt>
<dd>the enabled RC_PROTO_* wakeup protocol or
RC_PROTO_UNKNOWN if disabled.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scancode_filter</span></code></dt>
<dd>scancode filter</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scancode_wakeup_filter</span></code></dt>
<dd>scancode wakeup filters</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scancode_mask</span></code></dt>
<dd>some hardware decoders are not capable of providing the full
scancode to the application. As this is a hardware limit, we can’t do
anything with it. Yet, as the same keycode table can be used with other
devices, a mask is provided to allow its usage. Drivers should generally
leave this field in blank</dd>
<dt><code class="docutils literal notranslate"><span class="pre">users</span></code></dt>
<dd>number of current users of the device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priv</span></code></dt>
<dd>driver-specific data</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keylock</span></code></dt>
<dd>protects the remaining members of the struct</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keypressed</span></code></dt>
<dd>whether a key is currently pressed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keyup_jiffies</span></code></dt>
<dd>time (in jiffies) when the current keypress should be released</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timer_keyup</span></code></dt>
<dd>timer for releasing a keypress</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timer_repeat</span></code></dt>
<dd>timer for autorepeat events. This is needed for CEC, which
has non-standard repeats.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">last_keycode</span></code></dt>
<dd>keycode of last keypress</dd>
<dt><code class="docutils literal notranslate"><span class="pre">last_protocol</span></code></dt>
<dd>protocol of last keypress</dd>
<dt><code class="docutils literal notranslate"><span class="pre">last_scancode</span></code></dt>
<dd>scancode of last keypress</dd>
<dt><code class="docutils literal notranslate"><span class="pre">last_toggle</span></code></dt>
<dd>toggle value of last command</dd>
<dt><code class="docutils literal notranslate"><span class="pre">timeout</span></code></dt>
<dd>optional time after which device stops sending data</dd>
<dt><code class="docutils literal notranslate"><span class="pre">min_timeout</span></code></dt>
<dd>minimum timeout supported by device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">max_timeout</span></code></dt>
<dd>maximum timeout supported by device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rx_resolution</span></code></dt>
<dd>resolution (in us) of input sampler</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tx_resolution</span></code></dt>
<dd>resolution (in us) of output sampler</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lirc_dev</span></code></dt>
<dd>lirc device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lirc_cdev</span></code></dt>
<dd>lirc char cdev</dd>
<dt><code class="docutils literal notranslate"><span class="pre">gap_start</span></code></dt>
<dd>start time for gap after timeout if non-zero</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lirc_fh_lock</span></code></dt>
<dd>protects lirc_fh list</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lirc_fh</span></code></dt>
<dd>list of open files</dd>
<dt><code class="docutils literal notranslate"><span class="pre">registered</span></code></dt>
<dd>set to true by <a class="reference internal" href="#c.rc_register_device" title="rc_register_device"><code class="xref c c-func docutils literal notranslate"><span class="pre">rc_register_device()</span></code></a>, false by
rc_unregister_device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">change_protocol</span></code></dt>
<dd>allow changing the protocol used on hardware decoders</dd>
<dt><code class="docutils literal notranslate"><span class="pre">open</span></code></dt>
<dd>callback to allow drivers to enable polling/irq when IR input device
is opened.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">close</span></code></dt>
<dd>callback to allow drivers to disable polling/irq when IR input device
is opened.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_tx_mask</span></code></dt>
<dd>set transmitter mask (for devices with multiple tx outputs)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_tx_carrier</span></code></dt>
<dd>set transmit carrier frequency</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_tx_duty_cycle</span></code></dt>
<dd>set transmit duty cycle (0% - 100%)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_rx_carrier_range</span></code></dt>
<dd>inform driver about carrier it is expected to handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tx_ir</span></code></dt>
<dd>transmit IR</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_idle</span></code></dt>
<dd>enable/disable hardware idle mode, upon which,
device doesn’t interrupt host until it sees IR pulses</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_wideband_receiver</span></code></dt>
<dd>enable wide band receiver used for learning</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_carrier_report</span></code></dt>
<dd>enable carrier reports</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_filter</span></code></dt>
<dd>set the scancode filter</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_wakeup_filter</span></code></dt>
<dd>set the wakeup scancode filter. If the mask is zero
then wakeup should be disabled. wakeup_protocol will be set to
a valid protocol if mask is nonzero.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">s_timeout</span></code></dt>
<dd>set hardware timeout in us</dd>
</dl>
<dl class="function">
<dt id="c.rc_allocate_device">
struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> * <code class="descname">rc_allocate_device</code><span class="sig-paren">(</span>enum<em>&nbsp;rc_driver_type</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_allocate_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocates a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">rc_driver_type</span></code></dt>
<dd>specifies the type of the RC output to be allocated
returns a pointer to <a class="reference internal" href="#c.rc_dev" title="rc_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span></code></a>.</dd>
</dl>
<dl class="function">
<dt id="c.devm_rc_allocate_device">
struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a> * <code class="descname">devm_rc_allocate_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a><em>&nbsp;*dev</em>, enum<em>&nbsp;rc_driver_type</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_rc_allocate_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Managed RC device allocation</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt>
<dd>pointer to <a class="reference internal" href="../infrastructure.html#c.device" title="device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code></a></dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">rc_driver_type</span></code></dt>
<dd>specifies the type of the RC output to be allocated
returns a pointer to <a class="reference internal" href="#c.rc_dev" title="rc_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span></code></a>.</dd>
</dl>
<dl class="function">
<dt id="c.rc_free_device">
void <code class="descname">rc_free_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a><em>&nbsp;*dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_free_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Frees a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*dev</span></code></dt>
<dd>pointer to <a class="reference internal" href="#c.rc_dev" title="rc_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span></code></a>.</dd>
</dl>
<dl class="function">
<dt id="c.rc_register_device">
int <code class="descname">rc_register_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a><em>&nbsp;*dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_register_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*dev</span></code></dt>
<dd>pointer to <a class="reference internal" href="#c.rc_dev" title="rc_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span></code></a>.</dd>
</dl>
<dl class="function">
<dt id="c.devm_rc_register_device">
int <code class="descname">devm_rc_register_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../infrastructure.html#c.device" title="device">device</a><em>&nbsp;*parent</em>, struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a><em>&nbsp;*dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_rc_register_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Manageded registering of a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt>
<dd>pointer to <a class="reference internal" href="../infrastructure.html#c.device" title="device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code></a>.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*dev</span></code></dt>
<dd>pointer to <a class="reference internal" href="#c.rc_dev" title="rc_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span></code></a>.</dd>
</dl>
<dl class="function">
<dt id="c.rc_unregister_device">
void <code class="descname">rc_unregister_device</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_dev" title="rc_dev">rc_dev</a><em>&nbsp;*dev</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_unregister_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregisters a RC device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span> <span class="pre">*dev</span></code></dt>
<dd>pointer to <a class="reference internal" href="#c.rc_dev" title="rc_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_dev</span></code></a>.</dd>
</dl>
<dl class="type">
<dt id="c.rc_map_table">
struct <code class="descname">rc_map_table</code><a class="headerlink" href="#c.rc_map_table" title="Permalink to this definition">¶</a></dt>
<dd><p>represents a scancode/keycode pair</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rc_map_table {
  u64 scancode;
  u32 keycode;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">scancode</span></code></dt>
<dd>scan code (u64)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keycode</span></code></dt>
<dd>Linux input keycode</dd>
</dl>
<dl class="type">
<dt id="c.rc_map">
struct <code class="descname">rc_map</code><a class="headerlink" href="#c.rc_map" title="Permalink to this definition">¶</a></dt>
<dd><p>represents a keycode map table</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rc_map {
  struct rc_map_table     *scan;
  unsigned int            size;
  unsigned int            len;
  unsigned int            alloc;
  enum rc_proto           rc_proto;
  const char              *name;
  spinlock_t lock;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">scan</span></code></dt>
<dd>pointer to struct <a class="reference internal" href="#c.rc_map_table" title="rc_map_table"><code class="xref c c-type docutils literal notranslate"><span class="pre">rc_map_table</span></code></a></dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code></dt>
<dd>Max number of entries</dd>
<dt><code class="docutils literal notranslate"><span class="pre">len</span></code></dt>
<dd>Number of entries that are in use</dd>
<dt><code class="docutils literal notranslate"><span class="pre">alloc</span></code></dt>
<dd>size of *scan, in bytes</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rc_proto</span></code></dt>
<dd>type of the remote controller protocol, as defined at
enum <code class="xref c c-type docutils literal notranslate"><span class="pre">rc_proto</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt>
<dd>name of the key map table</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lock</span></code></dt>
<dd>lock to protect access to this structure</dd>
</dl>
<dl class="type">
<dt id="c.rc_map_list">
struct <code class="descname">rc_map_list</code><a class="headerlink" href="#c.rc_map_list" title="Permalink to this definition">¶</a></dt>
<dd><p>list of the registered <a class="reference internal" href="#c.rc_map" title="rc_map"><code class="xref c c-type docutils literal notranslate"><span class="pre">rc_map</span></code></a> maps</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct rc_map_list {
  struct list_head         list;
  struct rc_map map;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">list</span></code></dt>
<dd>pointer to struct <code class="xref c c-type docutils literal notranslate"><span class="pre">list_head</span></code></dd>
<dt><code class="docutils literal notranslate"><span class="pre">map</span></code></dt>
<dd>pointer to struct <a class="reference internal" href="#c.rc_map" title="rc_map"><code class="xref c c-type docutils literal notranslate"><span class="pre">rc_map</span></code></a></dd>
</dl>
<dl class="function">
<dt id="c.rc_map_register">
int <code class="descname">rc_map_register</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_map_list" title="rc_map_list">rc_map_list</a><em>&nbsp;*map</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_map_register" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a Remote Controller scancode map</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_map_list</span> <span class="pre">*map</span></code></dt>
<dd>pointer to <a class="reference internal" href="#c.rc_map_list" title="rc_map_list"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_map_list</span></code></a></dd>
</dl>
<dl class="function">
<dt id="c.rc_map_unregister">
void <code class="descname">rc_map_unregister</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.rc_map_list" title="rc_map_list">rc_map_list</a><em>&nbsp;*map</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_map_unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregisters a Remote Controller scancode map</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_map_list</span> <span class="pre">*map</span></code></dt>
<dd>pointer to <a class="reference internal" href="#c.rc_map_list" title="rc_map_list"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">rc_map_list</span></code></a></dd>
</dl>
<dl class="function">
<dt id="c.rc_map_get">
struct <a class="reference internal" href="#c.rc_map" title="rc_map">rc_map</a> * <code class="descname">rc_map_get</code><span class="sig-paren">(</span>const char<em>&nbsp;*name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rc_map_get" title="Permalink to this definition">¶</a></dt>
<dd><p>gets an RC map from its name</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt>
<dd>name of the RC scancode map</dd>
</dl>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mc-core.html" class="btn btn-neutral float-right" title="5. Media Controller devices" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dtv-net.html" class="btn btn-neutral" title="3.5. Digital TV Network kABI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'5.18.0-rc1-torvalds+',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>