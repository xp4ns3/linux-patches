

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GPU Power/Thermal Controls and Monitoring &mdash; The Linux Kernel 5.18.0-rc1-torvalds+ documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/theme_rtd_colors.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="The Linux Kernel 5.18.0-rc1-torvalds+ documentation" href="../../index.html"/>
        <link rel="up" title="drm/amdgpu AMDgpu driver" href="index.html"/>
        <link rel="next" title="Misc AMDGPU driver information" href="driver-misc.html"/>
        <link rel="prev" title="AMDGPU RAS Support" href="ras.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.18.0-rc2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Linux GPU Driver Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm-internals.html">DRM Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm-mm.html">DRM Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm-kms.html">Kernel Mode Setting (KMS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm-kms-helpers.html">Mode Setting Helper Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm-uapi.html">Userland interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../driver-uapi.html">DRM Driver uAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drm-client.html">Kernel clients</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../drivers.html">GPU Driver Documentation</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">drm/amdgpu AMDgpu driver</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="module-parameters.html">Module Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="driver-core.html">Core Driver Infrastructure</a></li>
<li class="toctree-l4"><a class="reference internal" href="display/index.html">drm/amd/display - Display Core (DC)</a></li>
<li class="toctree-l4"><a class="reference internal" href="xgmi.html">AMDGPU XGMI Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="ras.html">AMDGPU RAS Support</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">GPU Power/Thermal Controls and Monitoring</a></li>
<li class="toctree-l4"><a class="reference internal" href="driver-misc.html">Misc AMDGPU driver information</a></li>
<li class="toctree-l4"><a class="reference internal" href="amdgpu-glossary.html">AMDGPU Glossary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../i915.html">drm/i915 Intel GFX Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mcde.html">drm/mcde ST-Ericsson MCDE Multi-channel display engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../meson.html">drm/meson AmLogic Meson Video Processing Unit</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pl111.html">drm/pl111 ARM PrimeCell PL110 and PL111 CLCD Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tegra.html">drm/tegra NVIDIA Tegra GPU and display driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tve200.html">drm/tve200 Faraday TV Encoder 200</a></li>
<li class="toctree-l3"><a class="reference internal" href="../v3d.html">drm/v3d Broadcom V3D Graphics Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vc4.html">drm/vc4 Broadcom VC4 Graphics Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vkms.html">drm/vkms Virtual Kernel Modesetting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bridge/dw-hdmi.html">drm/bridge/dw-hdmi Synopsys DesignWare HDMI Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xen-front.html">drm/xen-front Xen para-virtualized frontend driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../afbc.html">Arm Framebuffer Compression (AFBC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../komeda-kms.html">drm/komeda Arm display driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../backlight.html">Backlight support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vga-switcheroo.html">VGA Switcheroo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vgaarbiter.html">VGA Arbiter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../todo.html">TODO list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rfc/index.html">GPU RFC Section</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tty/index.html">TTY</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../peci/index.html">Linux PECI Subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Kernel tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Linux GPU Driver Developer’s Guide</a> &raquo;</li>
        
          <li><a href="../drivers.html">GPU Driver Documentation</a> &raquo;</li>
        
          <li><a href="index.html">drm/amdgpu AMDgpu driver</a> &raquo;</li>
        
      <li>GPU Power/Thermal Controls and Monitoring</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/gpu/amdgpu/thermal.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gpu-power-thermal-controls-and-monitoring">
<h1>GPU Power/Thermal Controls and Monitoring<a class="headerlink" href="#gpu-power-thermal-controls-and-monitoring" title="Permalink to this headline">¶</a></h1>
<div class="section" id="hwmon-interfaces">
<h2>HWMON Interfaces<a class="headerlink" href="#hwmon-interfaces" title="Permalink to this headline">¶</a></h2>
<p>The amdgpu driver exposes the following sensor interfaces:</p>
<ul class="simple">
<li>GPU temperature (via the on-die sensor)</li>
<li>GPU voltage</li>
<li>Northbridge voltage (APUs only)</li>
<li>GPU power</li>
<li>GPU fan</li>
<li>GPU gfx/compute engine clock</li>
<li>GPU memory clock (dGPU only)</li>
</ul>
<p>hwmon interfaces for GPU temperature:</p>
<ul class="simple">
<li>temp[1-3]_input: the on die GPU temperature in millidegrees Celsius
- temp2_input and temp3_input are supported on SOC15 dGPUs only</li>
<li>temp[1-3]_label: temperature channel label
- temp2_label and temp3_label are supported on SOC15 dGPUs only</li>
<li>temp[1-3]_crit: temperature critical max value in millidegrees Celsius
- temp2_crit and temp3_crit are supported on SOC15 dGPUs only</li>
<li>temp[1-3]_crit_hyst: temperature hysteresis for critical limit in millidegrees Celsius
- temp2_crit_hyst and temp3_crit_hyst are supported on SOC15 dGPUs only</li>
<li>temp[1-3]_emergency: temperature emergency max value(asic shutdown) in millidegrees Celsius
- these are supported on SOC15 dGPUs only</li>
</ul>
<p>hwmon interfaces for GPU voltage:</p>
<ul class="simple">
<li>in0_input: the voltage on the GPU in millivolts</li>
<li>in1_input: the voltage on the Northbridge in millivolts</li>
</ul>
<p>hwmon interfaces for GPU power:</p>
<ul class="simple">
<li>power1_average: average power used by the GPU in microWatts</li>
<li>power1_cap_min: minimum cap supported in microWatts</li>
<li>power1_cap_max: maximum cap supported in microWatts</li>
<li>power1_cap: selected power cap in microWatts</li>
</ul>
<p>hwmon interfaces for GPU fan:</p>
<ul class="simple">
<li>pwm1: pulse width modulation fan level (0-255)</li>
<li>pwm1_enable: pulse width modulation fan control method (0: no fan speed control, 1: manual fan speed control using pwm interface, 2: automatic fan speed control)</li>
<li>pwm1_min: pulse width modulation fan control minimum level (0)</li>
<li>pwm1_max: pulse width modulation fan control maximum level (255)</li>
<li>fan1_min: a minimum value Unit: revolution/min (RPM)</li>
<li>fan1_max: a maximum value Unit: revolution/max (RPM)</li>
<li>fan1_input: fan speed in RPM</li>
<li>fan[1-*]_target: Desired fan speed Unit: revolution/min (RPM)</li>
<li>fan[1-*]_enable: Enable or disable the sensors.1: Enable 0: Disable</li>
</ul>
<dl class="docutils">
<dt>NOTE: DO NOT set the fan speed via “pwm1” and “fan[1-*]_target” interfaces at the same time.</dt>
<dd>That will get the former one overridden.</dd>
</dl>
<p>hwmon interfaces for GPU clocks:</p>
<ul class="simple">
<li>freq1_input: the gfx/compute clock in hertz</li>
<li>freq2_input: the memory clock in hertz</li>
</ul>
<p>You can use hwmon tools like sensors to view this information on your system.</p>
</div>
<div class="section" id="gpu-sysfs-power-state-interfaces">
<h2>GPU sysfs Power State Interfaces<a class="headerlink" href="#gpu-sysfs-power-state-interfaces" title="Permalink to this headline">¶</a></h2>
<p>GPU power controls are exposed via sysfs files.</p>
<div class="section" id="power-dpm-state">
<h3>power_dpm_state<a class="headerlink" href="#power-dpm-state" title="Permalink to this headline">¶</a></h3>
<p>The power_dpm_state file is a legacy interface and is only provided for
backwards compatibility. The amdgpu driver provides a sysfs API for adjusting
certain power related parameters.  The file power_dpm_state is used for this.
It accepts the following arguments:</p>
<ul class="simple">
<li>battery</li>
<li>balanced</li>
<li>performance</li>
</ul>
<p>battery</p>
<p>On older GPUs, the vbios provided a special power state for battery
operation.  Selecting battery switched to this state.  This is no
longer provided on newer GPUs so the option does nothing in that case.</p>
<p>balanced</p>
<p>On older GPUs, the vbios provided a special power state for balanced
operation.  Selecting balanced switched to this state.  This is no
longer provided on newer GPUs so the option does nothing in that case.</p>
<p>performance</p>
<p>On older GPUs, the vbios provided a special power state for performance
operation.  Selecting performance switched to this state.  This is no
longer provided on newer GPUs so the option does nothing in that case.</p>
</div>
<div class="section" id="power-dpm-force-performance-level">
<h3>power_dpm_force_performance_level<a class="headerlink" href="#power-dpm-force-performance-level" title="Permalink to this headline">¶</a></h3>
<p>The amdgpu driver provides a sysfs API for adjusting certain power
related parameters.  The file power_dpm_force_performance_level is
used for this.  It accepts the following arguments:</p>
<ul class="simple">
<li>auto</li>
<li>low</li>
<li>high</li>
<li>manual</li>
<li>profile_standard</li>
<li>profile_min_sclk</li>
<li>profile_min_mclk</li>
<li>profile_peak</li>
</ul>
<p>auto</p>
<p>When auto is selected, the driver will attempt to dynamically select
the optimal power profile for current conditions in the driver.</p>
<p>low</p>
<p>When low is selected, the clocks are forced to the lowest power state.</p>
<p>high</p>
<p>When high is selected, the clocks are forced to the highest power state.</p>
<p>manual</p>
<p>When manual is selected, the user can manually adjust which power states
are enabled for each clock domain via the sysfs pp_dpm_mclk, pp_dpm_sclk,
and pp_dpm_pcie files and adjust the power state transition heuristics
via the pp_power_profile_mode sysfs file.</p>
<p>profile_standard
profile_min_sclk
profile_min_mclk
profile_peak</p>
<p>When the profiling modes are selected, clock and power gating are
disabled and the clocks are set for different profiling cases. This
mode is recommended for profiling specific work loads where you do
not want clock or power gating for clock fluctuation to interfere
with your results. profile_standard sets the clocks to a fixed clock
level which varies from asic to asic.  profile_min_sclk forces the sclk
to the lowest level.  profile_min_mclk forces the mclk to the lowest level.
profile_peak sets all clocks (mclk, sclk, pcie) to the highest levels.</p>
</div>
<div class="section" id="pp-table">
<h3>pp_table<a class="headerlink" href="#pp-table" title="Permalink to this headline">¶</a></h3>
<p>The amdgpu driver provides a sysfs API for uploading new powerplay
tables.  The file pp_table is used for this.  Reading the file
will dump the current power play table.  Writing to the file
will attempt to upload a new powerplay table and re-initialize
powerplay using that new table.</p>
</div>
<div class="section" id="pp-od-clk-voltage">
<h3>pp_od_clk_voltage<a class="headerlink" href="#pp-od-clk-voltage" title="Permalink to this headline">¶</a></h3>
<p>The amdgpu driver provides a sysfs API for adjusting the clocks and voltages
in each power level within a power state.  The pp_od_clk_voltage is used for
this.</p>
<p>Note that the actual memory controller clock rate are exposed, not
the effective memory clock of the DRAMs. To translate it, use the
following formula:</p>
<p>Clock conversion (Mhz):</p>
<p>HBM: effective_memory_clock = memory_controller_clock * 1</p>
<p>G5: effective_memory_clock = memory_controller_clock * 1</p>
<p>G6: effective_memory_clock = memory_controller_clock * 2</p>
<p>DRAM data rate (MT/s):</p>
<p>HBM: effective_memory_clock * 2 = data_rate</p>
<p>G5: effective_memory_clock * 4 = data_rate</p>
<p>G6: effective_memory_clock * 8 = data_rate</p>
<p>Bandwidth (MB/s):</p>
<p>data_rate * vram_bit_width / 8 = memory_bandwidth</p>
<p>Some examples:</p>
<p>G5 on RX460:</p>
<p>memory_controller_clock = 1750 Mhz</p>
<p>effective_memory_clock = 1750 Mhz * 1 = 1750 Mhz</p>
<p>data rate = 1750 * 4 = 7000 MT/s</p>
<p>memory_bandwidth = 7000 * 128 bits / 8 = 112000 MB/s</p>
<p>G6 on RX5700:</p>
<p>memory_controller_clock = 875 Mhz</p>
<p>effective_memory_clock = 875 Mhz * 2 = 1750 Mhz</p>
<p>data rate = 1750 * 8 = 14000 MT/s</p>
<p>memory_bandwidth = 14000 * 256 bits / 8 = 448000 MB/s</p>
<p>&lt; For Vega10 and previous ASICs &gt;</p>
<p>Reading the file will display:</p>
<ul class="simple">
<li>a list of engine clock levels and voltages labeled OD_SCLK</li>
<li>a list of memory clock levels and voltages labeled OD_MCLK</li>
<li>a list of valid ranges for sclk, mclk, and voltage labeled OD_RANGE</li>
</ul>
<p>To manually adjust these settings, first select manual using
power_dpm_force_performance_level. Enter a new value for each
level by writing a string that contains “s/m level clock voltage” to
the file.  E.g., “s 1 500 820” will update sclk level 1 to be 500 MHz
at 820 mV; “m 0 350 810” will update mclk level 0 to be 350 MHz at
810 mV.  When you have edited all of the states as needed, write
“c” (commit) to the file to commit your changes.  If you want to reset to the
default power levels, write “r” (reset) to the file to reset them.</p>
<p>&lt; For Vega20 and newer ASICs &gt;</p>
<p>Reading the file will display:</p>
<ul class="simple">
<li>minimum and maximum engine clock labeled OD_SCLK</li>
<li>minimum(not available for Vega20 and Navi1x) and maximum memory
clock labeled OD_MCLK</li>
<li>three &lt;frequency, voltage&gt; points labeled OD_VDDC_CURVE.
They can be used to calibrate the sclk voltage curve.</li>
<li>voltage offset(in mV) applied on target voltage calculation.
This is available for Sienna Cichlid, Navy Flounder and Dimgrey
Cavefish. For these ASICs, the target voltage calculation can be
illustrated by “voltage = voltage calculated from v/f curve +
overdrive vddgfx offset”</li>
<li>a list of valid ranges for sclk, mclk, and voltage curve points
labeled OD_RANGE</li>
</ul>
<p>&lt; For APUs &gt;</p>
<p>Reading the file will display:</p>
<ul class="simple">
<li>minimum and maximum engine clock labeled OD_SCLK</li>
<li>a list of valid ranges for sclk labeled OD_RANGE</li>
</ul>
<p>&lt; For VanGogh &gt;</p>
<p>Reading the file will display:</p>
<ul class="simple">
<li>minimum and maximum engine clock labeled OD_SCLK</li>
<li>minimum and maximum core clocks labeled OD_CCLK</li>
<li>a list of valid ranges for sclk and cclk labeled OD_RANGE</li>
</ul>
<p>To manually adjust these settings:</p>
<ul>
<li><p class="first">First select manual using power_dpm_force_performance_level</p>
</li>
<li><p class="first">For clock frequency setting, enter a new value by writing a
string that contains “s/m index clock” to the file. The index
should be 0 if to set minimum clock. And 1 if to set maximum
clock. E.g., “s 0 500” will update minimum sclk to be 500 MHz.
“m 1 800” will update maximum mclk to be 800Mhz. For core
clocks on VanGogh, the string contains “p core index clock”.
E.g., “p 2 0 800” would set the minimum core clock on core
2 to 800Mhz.</p>
<p>For sclk voltage curve, enter the new values by writing a
string that contains “vc point clock voltage” to the file. The
points are indexed by 0, 1 and 2. E.g., “vc 0 300 600” will
update point1 with clock set as 300Mhz and voltage as
600mV. “vc 2 1000 1000” will update point3 with clock set
as 1000Mhz and voltage 1000mV.</p>
<p>To update the voltage offset applied for gfxclk/voltage calculation,
enter the new value by writing a string that contains “vo offset”.
This is supported by Sienna Cichlid, Navy Flounder and Dimgrey Cavefish.
And the offset can be a positive or negative value.</p>
</li>
<li><p class="first">When you have edited all of the states as needed, write “c” (commit)
to the file to commit your changes</p>
</li>
<li><p class="first">If you want to reset to the default power levels, write “r” (reset)
to the file to reset them</p>
</li>
</ul>
</div>
<div class="section" id="pp-dpm">
<h3>pp_dpm_*<a class="headerlink" href="#pp-dpm" title="Permalink to this headline">¶</a></h3>
<p>The amdgpu driver provides a sysfs API for adjusting what power levels
are enabled for a given power state.  The files pp_dpm_sclk, pp_dpm_mclk,
pp_dpm_socclk, pp_dpm_fclk, pp_dpm_dcefclk and pp_dpm_pcie are used for
this.</p>
<p>pp_dpm_socclk and pp_dpm_dcefclk interfaces are only available for
Vega10 and later ASICs.
pp_dpm_fclk interface is only available for Vega20 and later ASICs.</p>
<p>Reading back the files will show you the available power levels within
the power state and the clock information for those levels.</p>
<p>To manually adjust these states, first select manual using
power_dpm_force_performance_level.
Secondly, enter a new value for each level by inputing a string that
contains ” echo xx xx xx &gt; pp_dpm_sclk/mclk/pcie”
E.g.,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;4 5 6&quot;</span> &gt; pp_dpm_sclk
</pre></div>
</div>
<p>will enable sclk levels 4, 5, and 6.</p>
<p>NOTE: change to the dcefclk max dpm level is not supported now</p>
</div>
<div class="section" id="pp-power-profile-mode">
<h3>pp_power_profile_mode<a class="headerlink" href="#pp-power-profile-mode" title="Permalink to this headline">¶</a></h3>
<p>The amdgpu driver provides a sysfs API for adjusting the heuristics
related to switching between power levels in a power state.  The file
pp_power_profile_mode is used for this.</p>
<p>Reading this file outputs a list of all of the predefined power profiles
and the relevant heuristics settings for that profile.</p>
<p>To select a profile or create a custom profile, first select manual using
power_dpm_force_performance_level.  Writing the number of a predefined
profile to pp_power_profile_mode will enable those heuristics.  To
create a custom set of heuristics, write a string of numbers to the file
starting with the number of the custom profile along with a setting
for each heuristic parameter.  Due to differences across asic families
the heuristic parameters vary from family to family.</p>
</div>
<div class="section" id="busy-percent">
<h3>*_busy_percent<a class="headerlink" href="#busy-percent" title="Permalink to this headline">¶</a></h3>
<p>The amdgpu driver provides a sysfs API for reading how busy the GPU
is as a percentage.  The file gpu_busy_percent is used for this.
The SMU firmware computes a percentage of load based on the
aggregate activity level in the IP cores.</p>
<p>The amdgpu driver provides a sysfs API for reading how busy the VRAM
is as a percentage.  The file mem_busy_percent is used for this.
The SMU firmware computes a percentage of load based on the
aggregate activity level in the IP cores.</p>
</div>
<div class="section" id="gpu-metrics">
<h3>gpu_metrics<a class="headerlink" href="#gpu-metrics" title="Permalink to this headline">¶</a></h3>
<p>The amdgpu driver provides a sysfs API for retrieving current gpu
metrics data. The file gpu_metrics is used for this. Reading the
file will dump all the current gpu metrics data.</p>
<p>These data include temperature, frequency, engines utilization,
power consume, throttler status, fan speed and cpu core statistics(
available for APU only). That’s it will give a snapshot of all sensors
at the same time.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="driver-misc.html" class="btn btn-neutral float-right" title="Misc AMDGPU driver information" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ras.html" class="btn btn-neutral" title="AMDGPU RAS Support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'5.18.0-rc1-torvalds+',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>