

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Submitting patches: the essential guide to getting your code into the kernel &mdash; The Linux Kernel 5.18.0-rc1-torvalds+ documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/theme_rtd_colors.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="The Linux Kernel 5.18.0-rc1-torvalds+ documentation" href="../index.html"/>
        <link rel="up" title="Working with the kernel development community" href="index.html"/>
        <link rel="next" title="Handling regressions" href="handling-regressions.html"/>
        <link rel="prev" title="8. For more information" href="8.Conclusion.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.18.0-rc2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Working with the kernel development community</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="license-rules.html">Linux kernel licensing rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto.html">HOWTO do Linux kernel development</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-of-conduct.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l2"><a class="reference internal" href="code-of-conduct-interpretation.html">Linux Kernel Contributor Covenant Code of Conduct Interpretation</a></li>
<li class="toctree-l2"><a class="reference internal" href="development-process.html">A guide to the Kernel Development Process</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Submitting patches: the essential guide to getting your code into the kernel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#obtain-a-current-source-tree">Obtain a current source tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="#describe-your-changes">Describe your changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#separate-your-changes">Separate your changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#style-check-your-changes">Style-check your changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#select-the-recipients-for-your-patch">Select the recipients for your patch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#no-mime-no-links-no-compression-no-attachments-just-plain-text">No MIME, no links, no compression, no attachments.  Just plain text</a></li>
<li class="toctree-l3"><a class="reference internal" href="#respond-to-review-comments">Respond to review comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#don-t-get-discouraged-or-impatient">Don’t get discouraged - or impatient</a></li>
<li class="toctree-l3"><a class="reference internal" href="#include-patch-in-the-subject">Include PATCH in the subject</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sign-your-work-the-developer-s-certificate-of-origin">Sign your work - the Developer’s Certificate of Origin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#developer-s-certificate-of-origin-1-1">Developer’s Certificate of Origin 1.1</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#when-to-use-acked-by-cc-and-co-developed-by">When to use Acked-by:, Cc:, and Co-developed-by:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-reported-by-tested-by-reviewed-by-suggested-by-and-fixes">Using Reported-by:, Tested-by:, Reviewed-by:, Suggested-by: and Fixes:</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reviewer-s-statement-of-oversight">Reviewer’s statement of oversight</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-canonical-patch-format">The canonical patch format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#backtraces-in-commit-mesages">Backtraces in commit mesages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#explicit-in-reply-to-headers">Explicit In-Reply-To headers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#providing-base-tree-information">Providing base tree information</a></li>
<li class="toctree-l3"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="handling-regressions.html">Handling regressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="programming-language.html">Programming Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="coding-style.html">Linux kernel coding style</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintainer-handbooks.html">Subsystem and maintainer tree specific development process notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintainer-pgp-guide.html">Kernel Maintainer PGP guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="email-clients.html">Email clients info for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-enforcement-statement.html">Linux Kernel Enforcement Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-driver-statement.html">Kernel Driver Statement</a></li>
<li class="toctree-l2"><a class="reference internal" href="changes.html">Minimal requirements to compile the Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="submitting-drivers.html">Submitting Drivers For The Linux Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="stable-api-nonsense.html">The Linux Kernel Driver Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="management-style.html">Linux kernel management style</a></li>
<li class="toctree-l2"><a class="reference internal" href="stable-kernel-rules.html">Everything you ever wanted to know about Linux -stable releases</a></li>
<li class="toctree-l2"><a class="reference internal" href="submit-checklist.html">Linux Kernel patch submission checklist</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-docs.html">Index of Documentation for People Interested in Writing and/or Understanding the Linux Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecated.html">Deprecated Interfaces, Language Features, Attributes, and Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="embargoed-hardware-issues.html">Embargoed hardware issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintainers.html">List of maintainers and how to submit kernel changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="researcher-guidelines.html">Researcher Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="applying-patches.html">Applying Patches To The Linux Kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding-syscalls.html">Adding a New System Call</a></li>
<li class="toctree-l2"><a class="reference internal" href="magic-number.html">Linux magic numbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="volatile-considered-harmful.html">Why the “volatile” type class should not be used</a></li>
<li class="toctree-l2"><a class="reference internal" href="botching-up-ioctls.html">(How to avoid) Botching up ioctls</a></li>
<li class="toctree-l2"><a class="reference internal" href="clang-format.html">clang-format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../riscv/patch-acceptance.html">arch/riscv maintenance guidelines for developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core-api/unaligned-memory-access.html">Unaligned Memory Accesses</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mhi/index.html">MHI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tty/index.html">TTY</a></li>
<li class="toctree-l1"><a class="reference internal" href="../peci/index.html">Linux PECI Subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arch.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Kernel tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Working with the kernel development community</a> &raquo;</li>
        
      <li>Submitting patches: the essential guide to getting your code into the kernel</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/process/submitting-patches.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="submitting-patches-the-essential-guide-to-getting-your-code-into-the-kernel">
<span id="submittingpatches"></span><h1>Submitting patches: the essential guide to getting your code into the kernel<a class="headerlink" href="#submitting-patches-the-essential-guide-to-getting-your-code-into-the-kernel" title="Permalink to this headline">¶</a></h1>
<p>For a person or company who wishes to submit a change to the Linux
kernel, the process can sometimes be daunting if you’re not familiar
with “the system.”  This text is a collection of suggestions which
can greatly increase the chances of your change being accepted.</p>
<p>This document contains a large number of suggestions in a relatively terse
format.  For detailed information on how the kernel development process
works, see <a class="reference internal" href="development-process.html"><span class="doc">A guide to the Kernel Development Process</span></a>. Also, read
<a class="reference internal" href="submit-checklist.html"><span class="doc">Linux Kernel patch submission checklist</span></a>
for a list of items to check before submitting code.  If you are submitting
a driver, also read <a class="reference internal" href="submitting-drivers.html"><span class="doc">Submitting Drivers For The Linux Kernel</span></a>; for device
tree binding patches, read
<a class="reference internal" href="../devicetree/bindings/submitting-patches.html"><span class="doc">Submitting Devicetree (DT) binding patches</span></a>.</p>
<p>This documentation assumes that you’re using <code class="docutils literal notranslate"><span class="pre">git</span></code> to prepare your patches.
If you’re unfamiliar with <code class="docutils literal notranslate"><span class="pre">git</span></code>, you would be well-advised to learn how to
use it, it will make your life as a kernel developer and in general much
easier.</p>
<p>Some subsystems and maintainer trees have additional information about
their workflow and expectations, see
<a class="reference internal" href="maintainer-handbooks.html#maintainer-handbooks-main"><span class="std std-ref">Documentation/process/maintainer-handbooks.rst</span></a>.</p>
<div class="section" id="obtain-a-current-source-tree">
<h2>Obtain a current source tree<a class="headerlink" href="#obtain-a-current-source-tree" title="Permalink to this headline">¶</a></h2>
<p>If you do not have a repository with the current kernel source handy, use
<code class="docutils literal notranslate"><span class="pre">git</span></code> to obtain one.  You’ll want to start with the mainline repository,
which can be grabbed with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
</pre></div>
</div>
<p>Note, however, that you may not want to develop against the mainline tree
directly.  Most subsystem maintainers run their own trees and want to see
patches prepared against those trees.  See the <strong>T:</strong> entry for the subsystem
in the MAINTAINERS file to find that tree, or simply ask the maintainer if
the tree is not listed there.</p>
</div>
<div class="section" id="describe-your-changes">
<span id="describe-changes"></span><h2>Describe your changes<a class="headerlink" href="#describe-your-changes" title="Permalink to this headline">¶</a></h2>
<p>Describe your problem.  Whether your patch is a one-line bug fix or
5000 lines of a new feature, there must be an underlying problem that
motivated you to do this work.  Convince the reviewer that there is a
problem worth fixing and that it makes sense for them to read past the
first paragraph.</p>
<p>Describe user-visible impact.  Straight up crashes and lockups are
pretty convincing, but not all bugs are that blatant.  Even if the
problem was spotted during code review, describe the impact you think
it can have on users.  Keep in mind that the majority of Linux
installations run kernels from secondary stable trees or
vendor/product-specific trees that cherry-pick only specific patches
from upstream, so include anything that could help route your change
downstream: provoking circumstances, excerpts from dmesg, crash
descriptions, performance regressions, latency spikes, lockups, etc.</p>
<p>Quantify optimizations and trade-offs.  If you claim improvements in
performance, memory consumption, stack footprint, or binary size,
include numbers that back them up.  But also describe non-obvious
costs.  Optimizations usually aren’t free but trade-offs between CPU,
memory, and readability; or, when it comes to heuristics, between
different workloads.  Describe the expected downsides of your
optimization so that the reviewer can weigh costs against benefits.</p>
<p>Once the problem is established, describe what you are actually doing
about it in technical detail.  It’s important to describe the change
in plain English for the reviewer to verify that the code is behaving
as you intend it to.</p>
<p>The maintainer will thank you if you write your patch description in a
form which can be easily pulled into Linux’s source code management
system, <code class="docutils literal notranslate"><span class="pre">git</span></code>, as a “commit log”.  See <a class="reference internal" href="#explicit-in-reply-to"><span class="std std-ref">Explicit In-Reply-To headers</span></a>.</p>
<p>Solve only one problem per patch.  If your description starts to get
long, that’s a sign that you probably need to split up your patch.
See <a class="reference internal" href="#split-changes"><span class="std std-ref">Separate your changes</span></a>.</p>
<p>When you submit or resubmit a patch or patch series, include the
complete patch description and justification for it.  Don’t just
say that this is version N of the patch (series).  Don’t expect the
subsystem maintainer to refer back to earlier patch versions or referenced
URLs to find the patch description and put that into the patch.
I.e., the patch (series) and its description should be self-contained.
This benefits both the maintainers and reviewers.  Some reviewers
probably didn’t even receive earlier versions of the patch.</p>
<p>Describe your changes in imperative mood, e.g. “make xyzzy do frotz”
instead of “[This patch] makes xyzzy do frotz” or “[I] changed xyzzy
to do frotz”, as if you are giving orders to the codebase to change
its behaviour.</p>
<p>If you want to refer to a specific commit, don’t just refer to the
SHA-1 ID of the commit. Please also include the oneline summary of
the commit, to make it easier for reviewers to know what it is about.
Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Commit e21d2170f36602ae2708 (&quot;video: remove unnecessary
platform_set_drvdata()&quot;) removed the unnecessary
platform_set_drvdata(), but left the variable &quot;dev&quot; unused,
delete it.
</pre></div>
</div>
<p>You should also be sure to use at least the first twelve characters of the
SHA-1 ID.  The kernel repository holds a <em>lot</em> of objects, making
collisions with shorter IDs a real possibility.  Bear in mind that, even if
there is no collision with your six-character ID now, that condition may
change five years from now.</p>
<p>If related discussions or any other background information behind the change
can be found on the web, add ‘Link:’ tags pointing to it. In case your patch
fixes a bug, for example, add a tag with a URL referencing the report in the
mailing list archives or a bug tracker; if the patch is a result of some
earlier mailing list discussion or something documented on the web, point to
it.</p>
<p>When linking to mailing list archives, preferably use the lore.kernel.org
message archiver service. To create the link URL, use the contents of the
<code class="docutils literal notranslate"><span class="pre">Message-Id</span></code> header of the message without the surrounding angle brackets.
For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Link: https://lore.kernel.org/r/30th.anniversary.repost@klaava.Helsinki.FI/
</pre></div>
</div>
<p>Please check the link to make sure that it is actually working and points
to the relevant message.</p>
<p>However, try to make your explanation understandable without external
resources. In addition to giving a URL to a mailing list archive or bug,
summarize the relevant points of the discussion that led to the
patch as submitted.</p>
<p>If your patch fixes a bug in a specific commit, e.g. you found an issue using
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code>, please use the ‘Fixes:’ tag with the first 12 characters of
the SHA-1 ID, and the one line summary.  Do not split the tag across multiple
lines, tags are exempt from the “wrap at 75 columns” rule in order to simplify
parsing scripts.  For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Fixes: 54a4f0239f2e (&quot;KVM: MMU: make kvm_mmu_zap_page() return the number of pages it actually freed&quot;)
</pre></div>
</div>
<p>The following <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span></code> settings can be used to add a pretty format for
outputting the above style in the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">show</span></code> commands:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[core]
        abbrev = 12
[pretty]
        fixes = Fixes: %h (\&quot;%s\&quot;)
</pre></div>
</div>
<p>An example call:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git log -1 --pretty=fixes 54a4f0239f2e
Fixes: 54a4f0239f2e (&quot;KVM: MMU: make kvm_mmu_zap_page() return the number of pages it actually freed&quot;)
</pre></div>
</div>
</div>
<div class="section" id="separate-your-changes">
<span id="split-changes"></span><h2>Separate your changes<a class="headerlink" href="#separate-your-changes" title="Permalink to this headline">¶</a></h2>
<p>Separate each <strong>logical change</strong> into a separate patch.</p>
<p>For example, if your changes include both bug fixes and performance
enhancements for a single driver, separate those changes into two
or more patches.  If your changes include an API update, and a new
driver which uses that new API, separate those into two patches.</p>
<p>On the other hand, if you make a single change to numerous files,
group those changes into a single patch.  Thus a single logical change
is contained within a single patch.</p>
<p>The point to remember is that each patch should make an easily understood
change that can be verified by reviewers.  Each patch should be justifiable
on its own merits.</p>
<p>If one patch depends on another patch in order for a change to be
complete, that is OK.  Simply note <strong>“this patch depends on patch X”</strong>
in your patch description.</p>
<p>When dividing your change into a series of patches, take special care to
ensure that the kernel builds and runs properly after each patch in the
series.  Developers using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code> to track down a problem can end up
splitting your patch series at any point; they will not thank you if you
introduce bugs in the middle.</p>
<p>If you cannot condense your patch set into a smaller set of patches,
then only post say 15 or so at a time and wait for review and integration.</p>
</div>
<div class="section" id="style-check-your-changes">
<h2>Style-check your changes<a class="headerlink" href="#style-check-your-changes" title="Permalink to this headline">¶</a></h2>
<p>Check your patch for basic style violations, details of which can be
found in <a class="reference internal" href="coding-style.html"><span class="doc">Linux kernel coding style</span></a>.
Failure to do so simply wastes
the reviewers time and will get your patch rejected, probably
without even being read.</p>
<p>One significant exception is when moving code from one file to
another – in this case you should not modify the moved code at all in
the same patch which moves it.  This clearly delineates the act of
moving the code and your changes.  This greatly aids review of the
actual differences and allows tools to better track the history of
the code itself.</p>
<p>Check your patches with the patch style checker prior to submission
(scripts/checkpatch.pl).  Note, though, that the style checker should be
viewed as a guide, not as a replacement for human judgment.  If your code
looks better with a violation then its probably best left alone.</p>
<dl class="docutils">
<dt>The checker reports at three levels:</dt>
<dd><ul class="first last simple">
<li>ERROR: things that are very likely to be wrong</li>
<li>WARNING: things requiring careful review</li>
<li>CHECK: things requiring thought</li>
</ul>
</dd>
</dl>
<p>You should be able to justify all violations that remain in your
patch.</p>
</div>
<div class="section" id="select-the-recipients-for-your-patch">
<h2>Select the recipients for your patch<a class="headerlink" href="#select-the-recipients-for-your-patch" title="Permalink to this headline">¶</a></h2>
<p>You should always copy the appropriate subsystem maintainer(s) on any patch
to code that they maintain; look through the MAINTAINERS file and the
source code revision history to see who those maintainers are.  The
script scripts/get_maintainer.pl can be very useful at this step.  If you
cannot find a maintainer for the subsystem you are working on, Andrew
Morton (<a class="reference external" href="mailto:akpm&#37;&#52;&#48;linux-foundation&#46;org">akpm<span>&#64;</span>linux-foundation<span>&#46;</span>org</a>) serves as a maintainer of last resort.</p>
<p>You should also normally choose at least one mailing list to receive a copy
of your patch set.  <a class="reference external" href="mailto:linux-kernel&#37;&#52;&#48;vger&#46;kernel&#46;org">linux-kernel<span>&#64;</span>vger<span>&#46;</span>kernel<span>&#46;</span>org</a> should be used by default
for all patches, but the volume on that list has caused a number of
developers to tune it out.  Look in the MAINTAINERS file for a
subsystem-specific list; your patch will probably get more attention there.
Please do not spam unrelated lists, though.</p>
<p>Many kernel-related lists are hosted on vger.kernel.org; you can find a
list of them at <a class="reference external" href="http://vger.kernel.org/vger-lists.html">http://vger.kernel.org/vger-lists.html</a>.  There are
kernel-related lists hosted elsewhere as well, though.</p>
<p>Do not send more than 15 patches at once to the vger mailing lists!!!</p>
<p>Linus Torvalds is the final arbiter of all changes accepted into the
Linux kernel.  His e-mail address is &lt;<a class="reference external" href="mailto:torvalds&#37;&#52;&#48;linux-foundation&#46;org">torvalds<span>&#64;</span>linux-foundation<span>&#46;</span>org</a>&gt;.
He gets a lot of e-mail, and, at this point, very few patches go through
Linus directly, so typically you should do your best to -avoid-
sending him e-mail.</p>
<p>If you have a patch that fixes an exploitable security bug, send that patch
to <a class="reference external" href="mailto:security&#37;&#52;&#48;kernel&#46;org">security<span>&#64;</span>kernel<span>&#46;</span>org</a>.  For severe bugs, a short embargo may be considered
to allow distributors to get the patch out to users; in such cases,
obviously, the patch should not be sent to any public lists. See also
<a class="reference internal" href="../admin-guide/security-bugs.html"><span class="doc">Security bugs</span></a>.</p>
<p>Patches that fix a severe bug in a released kernel should be directed
toward the stable maintainers by putting a line like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Cc: stable@vger.kernel.org
</pre></div>
</div>
<p>into the sign-off area of your patch (note, NOT an email recipient).  You
should also read <a class="reference internal" href="stable-kernel-rules.html"><span class="doc">Everything you ever wanted to know about Linux -stable releases</span></a>
in addition to this document.</p>
<p>If changes affect userland-kernel interfaces, please send the MAN-PAGES
maintainer (as listed in the MAINTAINERS file) a man-pages patch, or at
least a notification of the change, so that some information makes its way
into the manual pages.  User-space API changes should also be copied to
<a class="reference external" href="mailto:linux-api&#37;&#52;&#48;vger&#46;kernel&#46;org">linux-api<span>&#64;</span>vger<span>&#46;</span>kernel<span>&#46;</span>org</a>.</p>
</div>
<div class="section" id="no-mime-no-links-no-compression-no-attachments-just-plain-text">
<h2>No MIME, no links, no compression, no attachments.  Just plain text<a class="headerlink" href="#no-mime-no-links-no-compression-no-attachments-just-plain-text" title="Permalink to this headline">¶</a></h2>
<p>Linus and other kernel developers need to be able to read and comment
on the changes you are submitting.  It is important for a kernel
developer to be able to “quote” your changes, using standard e-mail
tools, so that they may comment on specific portions of your code.</p>
<p>For this reason, all patches should be submitted by e-mail “inline”. The
easiest way to do this is with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">send-email</span></code>, which is strongly
recommended.  An interactive tutorial for <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">send-email</span></code> is available at
<a class="reference external" href="https://git-send-email.io">https://git-send-email.io</a>.</p>
<p>If you choose not to use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">send-email</span></code>:</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Be wary of your editor’s word-wrap corrupting your patch,
if you choose to cut-n-paste your patch.</p>
</div>
<p>Do not attach the patch as a MIME attachment, compressed or not.
Many popular e-mail applications will not always transmit a MIME
attachment as plain text, making it impossible to comment on your
code.  A MIME attachment also takes Linus a bit more time to process,
decreasing the likelihood of your MIME-attached change being accepted.</p>
<p>Exception:  If your mailer is mangling patches then someone may ask
you to re-send them using MIME.</p>
<p>See <a class="reference internal" href="email-clients.html"><span class="doc">Email clients info for Linux</span></a> for hints about configuring
your e-mail client so that it sends your patches untouched.</p>
</div>
<div class="section" id="respond-to-review-comments">
<h2>Respond to review comments<a class="headerlink" href="#respond-to-review-comments" title="Permalink to this headline">¶</a></h2>
<p>Your patch will almost certainly get comments from reviewers on ways in
which the patch can be improved, in the form of a reply to your email. You must
respond to those comments; ignoring reviewers is a good way to get ignored in
return. You can simply reply to their emails to answer their comments. Review
comments or questions that do not lead to a code change should almost certainly
bring about a comment or changelog entry so that the next reviewer better
understands what is going on.</p>
<p>Be sure to tell the reviewers what changes you are making and to thank them
for their time.  Code review is a tiring and time-consuming process, and
reviewers sometimes get grumpy.  Even in that case, though, respond
politely and address the problems they have pointed out.</p>
<p>See <a class="reference internal" href="email-clients.html"><span class="doc">Email clients info for Linux</span></a> for recommendations on email
clients and mailing list etiquette.</p>
</div>
<div class="section" id="don-t-get-discouraged-or-impatient">
<span id="resend-reminders"></span><h2>Don’t get discouraged - or impatient<a class="headerlink" href="#don-t-get-discouraged-or-impatient" title="Permalink to this headline">¶</a></h2>
<p>After you have submitted your change, be patient and wait.  Reviewers are
busy people and may not get to your patch right away.</p>
<p>Once upon a time, patches used to disappear into the void without comment,
but the development process works more smoothly than that now.  You should
receive comments within a week or so; if that does not happen, make sure
that you have sent your patches to the right place.  Wait for a minimum of
one week before resubmitting or pinging reviewers - possibly longer during
busy times like merge windows.</p>
<p>It’s also ok to resend the patch or the patch series after a couple of
weeks with the word “RESEND” added to the subject line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[PATCH Vx RESEND] sub/sys: Condensed patch summary
</pre></div>
</div>
<p>Don’t add “RESEND” when you are submitting a modified version of your
patch or patch series - “RESEND” only applies to resubmission of a
patch or patch series which have not been modified in any way from the
previous submission.</p>
</div>
<div class="section" id="include-patch-in-the-subject">
<h2>Include PATCH in the subject<a class="headerlink" href="#include-patch-in-the-subject" title="Permalink to this headline">¶</a></h2>
<p>Due to high e-mail traffic to Linus, and to linux-kernel, it is common
convention to prefix your subject line with [PATCH].  This lets Linus
and other kernel developers more easily distinguish patches from other
e-mail discussions.</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">send-email</span></code> will do this for you automatically.</p>
</div>
<div class="section" id="sign-your-work-the-developer-s-certificate-of-origin">
<h2>Sign your work - the Developer’s Certificate of Origin<a class="headerlink" href="#sign-your-work-the-developer-s-certificate-of-origin" title="Permalink to this headline">¶</a></h2>
<p>To improve tracking of who did what, especially with patches that can
percolate to their final resting place in the kernel through several
layers of maintainers, we’ve introduced a “sign-off” procedure on
patches that are being emailed around.</p>
<p>The sign-off is a simple line at the end of the explanation for the
patch, which certifies that you wrote it or otherwise have the right to
pass it on as an open-source patch.  The rules are pretty simple: if you
can certify the below:</p>
<div class="section" id="developer-s-certificate-of-origin-1-1">
<h3>Developer’s Certificate of Origin 1.1<a class="headerlink" href="#developer-s-certificate-of-origin-1-1" title="Permalink to this headline">¶</a></h3>
<p>By making a contribution to this project, I certify that:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li>The contribution was created in whole or in part by me and I
have the right to submit it under the open source license
indicated in the file; or</li>
<li>The contribution is based upon previous work that, to the best
of my knowledge, is covered under an appropriate open source
license and I have the right under that license to submit that
work with modifications, whether created in whole or in part
by me, under the same open source license (unless I am
permitted to submit under a different license), as indicated
in the file; or</li>
<li>The contribution was provided directly to me by some other
person who certified (a), (b) or (c) and I have not modified
it.</li>
<li>I understand and agree that this project and the contribution
are public and that a record of the contribution (including all
personal information I submit with it, including my sign-off) is
maintained indefinitely and may be redistributed consistent with
this project or the open source license(s) involved.</li>
</ol>
</div></blockquote>
<p>then you just add a line saying:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Signed-off-by: Random J Developer &lt;random@developer.example.org&gt;
</pre></div>
</div>
<p>using your real name (sorry, no pseudonyms or anonymous contributions.)
This will be done for you automatically if you use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-s</span></code>.
Reverts should also include “Signed-off-by”. <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span> <span class="pre">-s</span></code> does that
for you.</p>
<p>Some people also put extra tags at the end.  They’ll just be ignored for
now, but you can do this to mark internal company procedures or just
point out some special detail about the sign-off.</p>
<p>Any further SoBs (Signed-off-by:’s) following the author’s SoB are from
people handling and transporting the patch, but were not involved in its
development. SoB chains should reflect the <strong>real</strong> route a patch took
as it was propagated to the maintainers and ultimately to Linus, with
the first SoB entry signalling primary authorship of a single author.</p>
</div>
</div>
<div class="section" id="when-to-use-acked-by-cc-and-co-developed-by">
<h2>When to use Acked-by:, Cc:, and Co-developed-by:<a class="headerlink" href="#when-to-use-acked-by-cc-and-co-developed-by" title="Permalink to this headline">¶</a></h2>
<p>The Signed-off-by: tag indicates that the signer was involved in the
development of the patch, or that he/she was in the patch’s delivery path.</p>
<p>If a person was not directly involved in the preparation or handling of a
patch but wishes to signify and record their approval of it then they can
ask to have an Acked-by: line added to the patch’s changelog.</p>
<p>Acked-by: is often used by the maintainer of the affected code when that
maintainer neither contributed to nor forwarded the patch.</p>
<p>Acked-by: is not as formal as Signed-off-by:.  It is a record that the acker
has at least reviewed the patch and has indicated acceptance.  Hence patch
mergers will sometimes manually convert an acker’s “yep, looks good to me”
into an Acked-by: (but note that it is usually better to ask for an
explicit ack).</p>
<p>Acked-by: does not necessarily indicate acknowledgement of the entire patch.
For example, if a patch affects multiple subsystems and has an Acked-by: from
one subsystem maintainer then this usually indicates acknowledgement of just
the part which affects that maintainer’s code.  Judgement should be used here.
When in doubt people should refer to the original discussion in the mailing
list archives.</p>
<p>If a person has had the opportunity to comment on a patch, but has not
provided such comments, you may optionally add a <code class="docutils literal notranslate"><span class="pre">Cc:</span></code> tag to the patch.
This is the only tag which might be added without an explicit action by the
person it names - but it should indicate that this person was copied on the
patch.  This tag documents that potentially interested parties
have been included in the discussion.</p>
<p>Co-developed-by: states that the patch was co-created by multiple developers;
it is used to give attribution to co-authors (in addition to the author
attributed by the From: tag) when several people work on a single patch.  Since
Co-developed-by: denotes authorship, every Co-developed-by: must be immediately
followed by a Signed-off-by: of the associated co-author.  Standard sign-off
procedure applies, i.e. the ordering of Signed-off-by: tags should reflect the
chronological history of the patch insofar as possible, regardless of whether
the author is attributed via From: or Co-developed-by:.  Notably, the last
Signed-off-by: must always be that of the developer submitting the patch.</p>
<p>Note, the From: tag is optional when the From: author is also the person (and
email) listed in the From: line of the email header.</p>
<p>Example of a patch submitted by the From: author:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;changelog&gt;

Co-developed-by: First Co-Author &lt;first@coauthor.example.org&gt;
Signed-off-by: First Co-Author &lt;first@coauthor.example.org&gt;
Co-developed-by: Second Co-Author &lt;second@coauthor.example.org&gt;
Signed-off-by: Second Co-Author &lt;second@coauthor.example.org&gt;
Signed-off-by: From Author &lt;from@author.example.org&gt;
</pre></div>
</div>
<p>Example of a patch submitted by a Co-developed-by: author:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>From: From Author &lt;from@author.example.org&gt;

&lt;changelog&gt;

Co-developed-by: Random Co-Author &lt;random@coauthor.example.org&gt;
Signed-off-by: Random Co-Author &lt;random@coauthor.example.org&gt;
Signed-off-by: From Author &lt;from@author.example.org&gt;
Co-developed-by: Submitting Co-Author &lt;sub@coauthor.example.org&gt;
Signed-off-by: Submitting Co-Author &lt;sub@coauthor.example.org&gt;
</pre></div>
</div>
</div>
<div class="section" id="using-reported-by-tested-by-reviewed-by-suggested-by-and-fixes">
<h2>Using Reported-by:, Tested-by:, Reviewed-by:, Suggested-by: and Fixes:<a class="headerlink" href="#using-reported-by-tested-by-reviewed-by-suggested-by-and-fixes" title="Permalink to this headline">¶</a></h2>
<p>The Reported-by tag gives credit to people who find bugs and report them and it
hopefully inspires them to help us again in the future.  Please note that if
the bug was reported in private, then ask for permission first before using the
Reported-by tag. The tag is intended for bugs; please do not use it to credit
feature requests.</p>
<p>A Tested-by: tag indicates that the patch has been successfully tested (in
some environment) by the person named.  This tag informs maintainers that
some testing has been performed, provides a means to locate testers for
future patches, and ensures credit for the testers.</p>
<p>Reviewed-by:, instead, indicates that the patch has been reviewed and found
acceptable according to the Reviewer’s Statement:</p>
<div class="section" id="reviewer-s-statement-of-oversight">
<h3>Reviewer’s statement of oversight<a class="headerlink" href="#reviewer-s-statement-of-oversight" title="Permalink to this headline">¶</a></h3>
<p>By offering my Reviewed-by: tag, I state that:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li>I have carried out a technical review of this patch to
evaluate its appropriateness and readiness for inclusion into
the mainline kernel.</li>
<li>Any problems, concerns, or questions relating to the patch
have been communicated back to the submitter.  I am satisfied
with the submitter’s response to my comments.</li>
<li>While there may be things that could be improved with this
submission, I believe that it is, at this time, (1) a
worthwhile modification to the kernel, and (2) free of known
issues which would argue against its inclusion.</li>
<li>While I have reviewed the patch and believe it to be sound, I
do not (unless explicitly stated elsewhere) make any
warranties or guarantees that it will achieve its stated
purpose or function properly in any given situation.</li>
</ol>
</div></blockquote>
<p>A Reviewed-by tag is a statement of opinion that the patch is an
appropriate modification of the kernel without any remaining serious
technical issues.  Any interested reviewer (who has done the work) can
offer a Reviewed-by tag for a patch.  This tag serves to give credit to
reviewers and to inform maintainers of the degree of review which has been
done on the patch.  Reviewed-by: tags, when supplied by reviewers known to
understand the subject area and to perform thorough reviews, will normally
increase the likelihood of your patch getting into the kernel.</p>
<p>Both Tested-by and Reviewed-by tags, once received on mailing list from tester
or reviewer, should be added by author to the applicable patches when sending
next versions.  However if the patch has changed substantially in following
version, these tags might not be applicable anymore and thus should be removed.
Usually removal of someone’s Tested-by or Reviewed-by tags should be mentioned
in the patch changelog (after the ‘—’ separator).</p>
<p>A Suggested-by: tag indicates that the patch idea is suggested by the person
named and ensures credit to the person for the idea. Please note that this
tag should not be added without the reporter’s permission, especially if the
idea was not posted in a public forum. That said, if we diligently credit our
idea reporters, they will, hopefully, be inspired to help us again in the
future.</p>
<p>A Fixes: tag indicates that the patch fixes an issue in a previous commit. It
is used to make it easy to determine where a bug originated, which can help
review a bug fix. This tag also assists the stable kernel team in determining
which stable kernel versions should receive your fix. This is the preferred
method for indicating a bug fixed by the patch. See <a class="reference internal" href="#describe-changes"><span class="std std-ref">Describe your changes</span></a>
for more details.</p>
<p>Note: Attaching a Fixes: tag does not subvert the stable kernel rules
process nor the requirement to Cc: <a class="reference external" href="mailto:stable&#37;&#52;&#48;vger&#46;kernel&#46;org">stable<span>&#64;</span>vger<span>&#46;</span>kernel<span>&#46;</span>org</a> on all stable
patch candidates. For more information, please read
<a class="reference internal" href="stable-kernel-rules.html"><span class="doc">Everything you ever wanted to know about Linux -stable releases</span></a>.</p>
</div>
</div>
<div class="section" id="the-canonical-patch-format">
<span id="id1"></span><h2>The canonical patch format<a class="headerlink" href="#the-canonical-patch-format" title="Permalink to this headline">¶</a></h2>
<p>This section describes how the patch itself should be formatted.  Note
that, if you have your patches stored in a <code class="docutils literal notranslate"><span class="pre">git</span></code> repository, proper patch
formatting can be had with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">format-patch</span></code>.  The tools cannot create
the necessary text, though, so read the instructions below anyway.</p>
<p>The canonical patch subject line is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Subject: [PATCH 001/123] subsystem: summary phrase
</pre></div>
</div>
<p>The canonical patch message body contains the following:</p>
<blockquote>
<div><ul class="simple">
<li>A <code class="docutils literal notranslate"><span class="pre">from</span></code> line specifying the patch author, followed by an empty
line (only needed if the person sending the patch is not the author).</li>
<li>The body of the explanation, line wrapped at 75 columns, which will
be copied to the permanent changelog to describe this patch.</li>
<li>An empty line.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">Signed-off-by:</span></code> lines, described above, which will
also go in the changelog.</li>
<li>A marker line containing simply <code class="docutils literal notranslate"><span class="pre">---</span></code>.</li>
<li>Any additional comments not suitable for the changelog.</li>
<li>The actual patch (<code class="docutils literal notranslate"><span class="pre">diff</span></code> output).</li>
</ul>
</div></blockquote>
<p>The Subject line format makes it very easy to sort the emails
alphabetically by subject line - pretty much any email reader will
support that - since because the sequence number is zero-padded,
the numerical and alphabetic sort is the same.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">subsystem</span></code> in the email’s Subject should identify which
area or subsystem of the kernel is being patched.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">summary</span> <span class="pre">phrase</span></code> in the email’s Subject should concisely
describe the patch which that email contains.  The <code class="docutils literal notranslate"><span class="pre">summary</span>
<span class="pre">phrase</span></code> should not be a filename.  Do not use the same <code class="docutils literal notranslate"><span class="pre">summary</span>
<span class="pre">phrase</span></code> for every patch in a whole patch series (where a <code class="docutils literal notranslate"><span class="pre">patch</span>
<span class="pre">series</span></code> is an ordered sequence of multiple, related patches).</p>
<p>Bear in mind that the <code class="docutils literal notranslate"><span class="pre">summary</span> <span class="pre">phrase</span></code> of your email becomes a
globally-unique identifier for that patch.  It propagates all the way
into the <code class="docutils literal notranslate"><span class="pre">git</span></code> changelog.  The <code class="docutils literal notranslate"><span class="pre">summary</span> <span class="pre">phrase</span></code> may later be used in
developer discussions which refer to the patch.  People will want to
google for the <code class="docutils literal notranslate"><span class="pre">summary</span> <span class="pre">phrase</span></code> to read discussion regarding that
patch.  It will also be the only thing that people may quickly see
when, two or three months later, they are going through perhaps
thousands of patches using tools such as <code class="docutils literal notranslate"><span class="pre">gitk</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span>
<span class="pre">--oneline</span></code>.</p>
<p>For these reasons, the <code class="docutils literal notranslate"><span class="pre">summary</span></code> must be no more than 70-75
characters, and it must describe both what the patch changes, as well
as why the patch might be necessary.  It is challenging to be both
succinct and descriptive, but that is what a well-written summary
should do.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">summary</span> <span class="pre">phrase</span></code> may be prefixed by tags enclosed in square
brackets: “Subject: [PATCH &lt;tag&gt;…] &lt;summary phrase&gt;”.  The tags are
not considered part of the summary phrase, but describe how the patch
should be treated.  Common tags might include a version descriptor if
the multiple versions of the patch have been sent out in response to
comments (i.e., “v1, v2, v3”), or “RFC” to indicate a request for
comments.</p>
<p>If there are four patches in a patch series the individual patches may
be numbered like this: 1/4, 2/4, 3/4, 4/4. This assures that developers
understand the order in which the patches should be applied and that
they have reviewed or applied all of the patches in the patch series.</p>
<p>Here are some good example Subjects:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Subject: [PATCH 2/5] ext2: improve scalability of bitmap searching
Subject: [PATCH v2 01/27] x86: fix eflags tracking
Subject: [PATCH v2] sub/sys: Condensed patch summary
Subject: [PATCH v2 M/N] sub/sys: Condensed patch summary
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">from</span></code> line must be the very first line in the message body,
and has the form:</p>
<blockquote>
<div>From: Patch Author &lt;<a class="reference external" href="mailto:author&#37;&#52;&#48;example&#46;com">author<span>&#64;</span>example<span>&#46;</span>com</a>&gt;</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">from</span></code> line specifies who will be credited as the author of the
patch in the permanent changelog.  If the <code class="docutils literal notranslate"><span class="pre">from</span></code> line is missing,
then the <code class="docutils literal notranslate"><span class="pre">From:</span></code> line from the email header will be used to determine
the patch author in the changelog.</p>
<p>The explanation body will be committed to the permanent source
changelog, so should make sense to a competent reader who has long since
forgotten the immediate details of the discussion that might have led to
this patch. Including symptoms of the failure which the patch addresses
(kernel log messages, oops messages, etc.) are especially useful for
people who might be searching the commit logs looking for the applicable
patch. The text should be written in such detail so that when read
weeks, months or even years later, it can give the reader the needed
details to grasp the reasoning for <strong>why</strong> the patch was created.</p>
<p>If a patch fixes a compile failure, it may not be necessary to include
_all_ of the compile failures; just enough that it is likely that
someone searching for the patch can find it. As in the <code class="docutils literal notranslate"><span class="pre">summary</span>
<span class="pre">phrase</span></code>, it is important to be both succinct as well as descriptive.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">---</span></code> marker line serves the essential purpose of marking for
patch handling tools where the changelog message ends.</p>
<p>One good use for the additional comments after the <code class="docutils literal notranslate"><span class="pre">---</span></code> marker is
for a <code class="docutils literal notranslate"><span class="pre">diffstat</span></code>, to show what files have changed, and the number of
inserted and deleted lines per file. A <code class="docutils literal notranslate"><span class="pre">diffstat</span></code> is especially useful
on bigger patches. If you are going to include a <code class="docutils literal notranslate"><span class="pre">diffstat</span></code> after the
<code class="docutils literal notranslate"><span class="pre">---</span></code> marker, please use <code class="docutils literal notranslate"><span class="pre">diffstat</span></code> options <code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">1</span> <span class="pre">-w</span> <span class="pre">70</span></code> so that
filenames are listed from the top of the kernel source tree and don’t
use too much horizontal space (easily fit in 80 columns, maybe with some
indentation). (<code class="docutils literal notranslate"><span class="pre">git</span></code> generates appropriate diffstats by default.)</p>
<p>Other comments relevant only to the moment or the maintainer, not
suitable for the permanent changelog, should also go here. A good
example of such comments might be <code class="docutils literal notranslate"><span class="pre">patch</span> <span class="pre">changelogs</span></code> which describe
what has changed between the v1 and v2 version of the patch.</p>
<p>Please put this information <strong>after</strong> the <code class="docutils literal notranslate"><span class="pre">---</span></code> line which separates
the changelog from the rest of the patch. The version information is
not part of the changelog which gets committed to the git tree. It is
additional information for the reviewers. If it’s placed above the
commit tags, it needs manual interaction to remove it. If it is below
the separator line, it gets automatically stripped off when applying the
patch:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;commit message&gt;
...
Signed-off-by: Author &lt;author@mail&gt;
---
V2 -&gt; V3: Removed redundant helper function
V1 -&gt; V2: Cleaned up coding style and addressed review comments

path/to/file | 5+++--
...
</pre></div>
</div>
<p>See more details on the proper patch format in the following
references.</p>
<div class="section" id="backtraces-in-commit-mesages">
<span id="backtraces"></span><h3>Backtraces in commit mesages<a class="headerlink" href="#backtraces-in-commit-mesages" title="Permalink to this headline">¶</a></h3>
<p>Backtraces help document the call chain leading to a problem. However,
not all backtraces are helpful. For example, early boot call chains are
unique and obvious. Copying the full dmesg output verbatim, however,
adds distracting information like timestamps, module lists, register and
stack dumps.</p>
<p>Therefore, the most useful backtraces should distill the relevant
information from the dump, which makes it easier to focus on the real
issue. Here is an example of a well-trimmed backtrace:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>unchecked MSR access error: WRMSR to 0xd51 (tried to write 0x0000000000000064)
at rIP: 0xffffffffae059994 (native_write_msr+0x4/0x20)
Call Trace:
mba_wrmsr
update_domains
rdtgroup_mkdir
</pre></div>
</div>
</div>
</div>
<div class="section" id="explicit-in-reply-to-headers">
<span id="explicit-in-reply-to"></span><h2>Explicit In-Reply-To headers<a class="headerlink" href="#explicit-in-reply-to-headers" title="Permalink to this headline">¶</a></h2>
<p>It can be helpful to manually add In-Reply-To: headers to a patch
(e.g., when using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">send-email</span></code>) to associate the patch with
previous relevant discussion, e.g. to link a bug fix to the email with
the bug report.  However, for a multi-patch series, it is generally
best to avoid using In-Reply-To: to link to older versions of the
series.  This way multiple versions of the patch don’t become an
unmanageable forest of references in email clients.  If a link is
helpful, you can use the <a class="reference external" href="https://lore.kernel.org/">https://lore.kernel.org/</a> redirector (e.g., in
the cover email text) to link to an earlier version of the patch series.</p>
</div>
<div class="section" id="providing-base-tree-information">
<h2>Providing base tree information<a class="headerlink" href="#providing-base-tree-information" title="Permalink to this headline">¶</a></h2>
<p>When other developers receive your patches and start the review process,
it is often useful for them to know where in the tree history they
should place your work. This is particularly useful for automated CI
processes that attempt to run a series of tests in order to establish
the quality of your submission before the maintainer starts the review.</p>
<p>If you are using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">format-patch</span></code> to generate your patches, you can
automatically include the base tree information in your submission by
using the <code class="docutils literal notranslate"><span class="pre">--base</span></code> flag. The easiest and most convenient way to use
this option is with topical branches:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git checkout -t -b my-topical-branch master
Branch &#39;my-topical-branch&#39; set up to track local branch &#39;master&#39;.
Switched to a new branch &#39;my-topical-branch&#39;

[perform your edits and commits]

$ git format-patch --base=auto --cover-letter -o outgoing/ master
outgoing/0000-cover-letter.patch
outgoing/0001-First-Commit.patch
outgoing/...
</pre></div>
</div>
<p>When you open <code class="docutils literal notranslate"><span class="pre">outgoing/0000-cover-letter.patch</span></code> for editing, you will
notice that it will have the <code class="docutils literal notranslate"><span class="pre">base-commit:</span></code> trailer at the very
bottom, which provides the reviewer and the CI tools enough information
to properly perform <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">am</span></code> without worrying about conflicts:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git checkout -b patch-review [base-commit-id]
Switched to a new branch &#39;patch-review&#39;
$ git am patches.mbox
Applying: First Commit
Applying: ...
</pre></div>
</div>
<p>Please see <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">git-format-patch</span></code> for more information about this
option.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">--base</span></code> feature was introduced in git version 2.9.0.</p>
</div>
<p>If you are not using git to format your patches, you can still include
the same <code class="docutils literal notranslate"><span class="pre">base-commit</span></code> trailer to indicate the commit hash of the tree
on which your work is based. You should add it either in the cover
letter or in the first patch of the series and it should be placed
either below the <code class="docutils literal notranslate"><span class="pre">---</span></code> line or at the very bottom of all other
content, right before your email signature.</p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Andrew Morton, “The perfect patch” (tpp).</dt>
<dd>&lt;<a class="reference external" href="https://www.ozlabs.org/~akpm/stuff/tpp.txt">https://www.ozlabs.org/~akpm/stuff/tpp.txt</a>&gt;</dd>
<dt>Jeff Garzik, “Linux kernel patch submission format”.</dt>
<dd>&lt;<a class="reference external" href="https://web.archive.org/web/20180829112450/http://linux.yyz.us/patch-format.html">https://web.archive.org/web/20180829112450/http://linux.yyz.us/patch-format.html</a>&gt;</dd>
<dt>Greg Kroah-Hartman, “How to piss off a kernel subsystem maintainer”.</dt>
<dd><p class="first">&lt;<a class="reference external" href="http://www.kroah.com/log/linux/maintainer.html">http://www.kroah.com/log/linux/maintainer.html</a>&gt;</p>
<p>&lt;<a class="reference external" href="http://www.kroah.com/log/linux/maintainer-02.html">http://www.kroah.com/log/linux/maintainer-02.html</a>&gt;</p>
<p>&lt;<a class="reference external" href="http://www.kroah.com/log/linux/maintainer-03.html">http://www.kroah.com/log/linux/maintainer-03.html</a>&gt;</p>
<p>&lt;<a class="reference external" href="http://www.kroah.com/log/linux/maintainer-04.html">http://www.kroah.com/log/linux/maintainer-04.html</a>&gt;</p>
<p>&lt;<a class="reference external" href="http://www.kroah.com/log/linux/maintainer-05.html">http://www.kroah.com/log/linux/maintainer-05.html</a>&gt;</p>
<p class="last">&lt;<a class="reference external" href="http://www.kroah.com/log/linux/maintainer-06.html">http://www.kroah.com/log/linux/maintainer-06.html</a>&gt;</p>
</dd>
<dt>NO!!!! No more huge patch bombs to <a class="reference external" href="mailto:linux-kernel&#37;&#52;&#48;vger&#46;kernel&#46;org">linux-kernel<span>&#64;</span>vger<span>&#46;</span>kernel<span>&#46;</span>org</a> people!</dt>
<dd>&lt;<a class="reference external" href="https://lore.kernel.org/r/20050711.125305.08322243.davem&#64;davemloft.net">https://lore.kernel.org/r/20050711.125305.08322243.davem&#64;davemloft.net</a>&gt;</dd>
</dl>
<p>Kernel <a class="reference internal" href="coding-style.html"><span class="doc">Linux kernel coding style</span></a></p>
<dl class="docutils">
<dt>Linus Torvalds’s mail on the canonical patch format:</dt>
<dd>&lt;<a class="reference external" href="https://lore.kernel.org/r/Pine.LNX.4.58.0504071023190.28951&#64;ppc970.osdl.org">https://lore.kernel.org/r/Pine.LNX.4.58.0504071023190.28951&#64;ppc970.osdl.org</a>&gt;</dd>
<dt>Andi Kleen, “On submitting kernel patches”</dt>
<dd><p class="first">Some strategies to get difficult or controversial changes in.</p>
<p class="last"><a class="reference external" href="http://halobates.de/on-submitting-patches.pdf">http://halobates.de/on-submitting-patches.pdf</a></p>
</dd>
</dl>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="handling-regressions.html" class="btn btn-neutral float-right" title="Handling regressions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="8.Conclusion.html" class="btn btn-neutral" title="8. For more information" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'5.18.0-rc1-torvalds+',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>