

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>KUnit - Linux Kernel Unit Testing &mdash; The Linux Kernel 5.18.0-rc1-torvalds+ documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/theme_rtd_colors.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="The Linux Kernel 5.18.0-rc1-torvalds+ documentation" href="../../index.html"/>
        <link rel="up" title="Development tools for the kernel" href="../index.html"/>
        <link rel="next" title="Getting Started" href="start.html"/>
        <link rel="prev" title="Linux Kernel Selftests" href="../kselftest.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.18.0-rc2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Kernel Build System</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Development tools for the kernel</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../testing-overview.html">Kernel Testing Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../checkpatch.html">Checkpatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sparse.html">Sparse</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kcov.html">kcov: code coverage for fuzzing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gcov.html">Using gcov with the Linux kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kasan.html">The Kernel Address Sanitizer (KASAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ubsan.html">The Undefined Behavior Sanitizer - UBSAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kmemleak.html">Kernel Memory Leak Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kcsan.html">The Kernel Concurrency Sanitizer (KCSAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kfence.html">Kernel Electric-Fence (KFENCE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gdb-kernel-debugging.html">Debugging kernel and modules via gdb</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kgdb.html">Using kgdb, kdb and the kernel debugger internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kselftest.html">Linux Kernel Selftests</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">KUnit - Linux Kernel Unit Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="start.html">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture.html">KUnit Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="run_wrapper.html">Run Tests with kunit_tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="run_manual.html">Run Tests without kunit_tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="usage.html">Writing Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="usage.html#common-patterns">Common Patterns</a></li>
<li class="toctree-l3"><a class="reference internal" href="kunit-tool.html">kunit_tool How-To</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/index.html">API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="style.html">Test Style and Nomenclature</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l3"><a class="reference internal" href="tips.html">Tips For Writing KUnit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_tips.html">Tips For Running KUnit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#unit-testing">Unit Testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#write-unit-tests">Write Unit Tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#unit-testing-advantages">Unit Testing Advantages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-use-it">How do I use it?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ktap.html">The Kernel Test Anything Protocol (KTAP), version 1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Kernel Livepatching</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accounting/index.html">Accounting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block/index.html">Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cdrom/index.html">cdrom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpu-freq/index.html">Linux CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ide/index.html">Integrated Drive Electronics (IDE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga/index.html">fpga</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pcmcia/index.html">pcmcia</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power/index.html">Power Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../target/index.html">TCM Virtual Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../timers/index.html">timers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watchdog/index.html">Linux Watchdog Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../virt/index.html">Linux Virtualization Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gpu/index.html">Linux GPU Driver Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../PCI/index.html">Linux PCI Bus Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scsi/index.html">Linux SCSI Subsystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../scheduler/index.html">Linux Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tty/index.html">TTY</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../peci/index.html">Linux PECI Subsystem</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../asm-annotations.html">Assembler Annotations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Kernel tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-types">Atomic Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#atomic-bitops">Atomic bitops</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html#memory-barriers">Memory Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../watch_queue.html">General notification mechanism</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Linux Kernel</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Development tools for the kernel</a> &raquo;</li>
        
      <li>KUnit - Linux Kernel Unit Testing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/dev-tools/kunit/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kunit-linux-kernel-unit-testing">
<h1>KUnit - Linux Kernel Unit Testing<a class="headerlink" href="#kunit-linux-kernel-unit-testing" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="start.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="start.html#installing-dependencies">Installing Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#running-tests-with-kunit-tool">Running tests with kunit_tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#running-tests-without-the-kunit-wrapper">Running Tests without the KUnit Wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#writing-your-first-test">Writing Your First Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="start.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">KUnit Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#in-kernel-testing-framework">In-Kernel Testing Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html#kunit-tool-command-line-test-harness">kunit_tool (Command Line Test Harness)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="run_wrapper.html">Run Tests with kunit_tool</a><ul>
<li class="toctree-l2"><a class="reference internal" href="run_wrapper.html#create-a-kunitconfig-file">Create a  <code class="docutils literal notranslate"><span class="pre">.kunitconfig</span></code> File</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_wrapper.html#configure-build-and-run-tests">Configure, Build, and Run Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_wrapper.html#parse-test-results">Parse Test Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_wrapper.html#run-selected-test-suites">Run Selected Test Suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_wrapper.html#run-tests-on-qemu">Run Tests on qemu</a></li>
<li class="toctree-l2"><a class="reference internal" href="run_wrapper.html#command-line-arguments">Command-Line Arguments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="run_manual.html">Run Tests without kunit_tool</a><ul>
<li class="toctree-l2"><a class="reference internal" href="run_manual.html#configure-the-kernel">Configure the Kernel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Writing Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="usage.html#test-cases">Test Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#writing-tests-for-other-architectures">Writing Tests For Other Architectures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html#common-patterns">Common Patterns</a><ul>
<li class="toctree-l2"><a class="reference internal" href="usage.html#isolating-behavior">Isolating Behavior</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#testing-against-multiple-inputs">Testing Against Multiple Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#exiting-early-on-failed-expectations">Exiting Early on Failed Expectations</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#allocating-memory">Allocating Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#testing-static-functions">Testing Static Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#injecting-test-only-code">Injecting Test-Only Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#accessing-the-current-test">Accessing The Current Test</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#failing-the-current-test">Failing The Current Test</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="kunit-tool.html">kunit_tool How-To</a><ul>
<li class="toctree-l2"><a class="reference internal" href="kunit-tool.html#what-is-kunit-tool">What is kunit_tool?</a></li>
<li class="toctree-l2"><a class="reference internal" href="kunit-tool.html#what-is-a-kunitconfig">What is a .kunitconfig?</a></li>
<li class="toctree-l2"><a class="reference internal" href="kunit-tool.html#getting-started-with-kunit-tool">Getting Started with kunit_tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="kunit-tool.html#configuring-building-and-running-tests">Configuring, Building, and Running Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="kunit-tool.html#parsing-test-results">Parsing Test Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="kunit-tool.html#filtering-tests">Filtering Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="kunit-tool.html#running-tests-on-qemu">Running Tests on QEMU</a></li>
<li class="toctree-l2"><a class="reference internal" href="kunit-tool.html#other-useful-options">Other Useful Options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/test.html">Test API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="style.html">Test Style and Nomenclature</a><ul>
<li class="toctree-l2"><a class="reference internal" href="style.html#subsystems-suites-and-tests">Subsystems, Suites, and Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="style.html#test-kconfig-entries">Test Kconfig Entries</a></li>
<li class="toctree-l2"><a class="reference internal" href="style.html#test-file-and-module-names">Test File and Module Names</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-is-this-different-from-autotest-kselftest-and-so-on">How is this different from Autotest, kselftest, and so on?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#does-kunit-support-running-on-architectures-other-than-uml">Does KUnit support running on architectures other than UML?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#what-is-the-difference-between-a-unit-test-and-other-kinds-of-tests">What is the difference between a unit test and other kinds of tests?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#kunit-is-not-working-what-should-i-do">KUnit is not working, what should I do?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">Tips For Writing KUnit Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tips.html#exiting-early-on-failed-expectations">Exiting early on failed expectations</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#allocating-memory">Allocating memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#testing-static-functions">Testing static functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#injecting-test-only-code">Injecting test-only code</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#accessing-the-current-test">Accessing the current test</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#failing-the-current-test">Failing the current test</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html#customizing-error-messages">Customizing error messages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="running_tips.html">Tips For Running KUnit Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="running_tips.html#using-kunit-py-run-kunit-tool">Using <code class="docutils literal notranslate"><span class="pre">kunit.py</span> <span class="pre">run</span></code> (“kunit tool”)</a></li>
<li class="toctree-l2"><a class="reference internal" href="running_tips.html#running-tests-manually">Running tests manually</a></li>
</ul>
</li>
</ul>
</div>
<p>This section details the kernel unit testing framework.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>KUnit (Kernel unit testing framework) provides a common framework for
unit tests within the Linux kernel. Using KUnit, you can define groups
of test cases called test suites. The tests either run on kernel boot
if built-in, or load as a module. KUnit automatically flags and reports
failed test cases in the kernel log. The test results appear in <a class="reference external" href="https://testanything.org/">TAP
(Test Anything Protocol) format</a>. It is inspired by
JUnit, Python’s unittest.mock, and GoogleTest/GoogleMock (C++ unit testing
framework).</p>
<p>KUnit tests are part of the kernel, written in the C (programming)
language, and test parts of the Kernel implementation (example: a C
language function). Excluding build time, from invocation to
completion, KUnit can run around 100 tests in less than 10 seconds.
KUnit can test any kernel component, for example: file system, system
calls, memory management, device drivers and so on.</p>
<p>KUnit follows the white-box testing approach. The test has access to
internal system functionality. KUnit runs in kernel space and is not
restricted to things exposed to user-space.</p>
<p>In addition, KUnit has kunit_tool, a script (<code class="docutils literal notranslate"><span class="pre">tools/testing/kunit/kunit.py</span></code>)
that configures the Linux kernel, runs KUnit tests under QEMU or UML (<a class="reference external" href="http://user-mode-linux.sourceforge.net/">User Mode
Linux</a>), parses the test results and
displays them in a user friendly manner.</p>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Provides a framework for writing unit tests.</li>
<li>Runs tests on any kernel architecture.</li>
<li>Runs a test in milliseconds.</li>
</ul>
</div>
<div class="section" id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Any Linux kernel compatible hardware.</li>
<li>For Kernel under test, Linux kernel version 5.5 or greater.</li>
</ul>
</div>
</div>
<div class="section" id="unit-testing">
<h2>Unit Testing<a class="headerlink" href="#unit-testing" title="Permalink to this headline">¶</a></h2>
<p>A unit test tests a single unit of code in isolation. A unit test is the finest
granularity of testing and allows all possible code paths to be tested in the
code under test. This is possible if the code under test is small and does not
have any external dependencies outside of the test’s control like hardware.</p>
<div class="section" id="write-unit-tests">
<h3>Write Unit Tests<a class="headerlink" href="#write-unit-tests" title="Permalink to this headline">¶</a></h3>
<p>To write good unit tests, there is a simple but powerful pattern:
Arrange-Act-Assert. This is a great way to structure test cases and
defines an order of operations.</p>
<ul class="simple">
<li>Arrange inputs and targets: At the start of the test, arrange the data
that allows a function to work. Example: initialize a statement or
object.</li>
<li>Act on the target behavior: Call your function/code under test.</li>
<li>Assert expected outcome: Verify that the result (or resulting state) is as
expected.</li>
</ul>
</div>
<div class="section" id="unit-testing-advantages">
<h3>Unit Testing Advantages<a class="headerlink" href="#unit-testing-advantages" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Increases testing speed and development in the long run.</li>
<li>Detects bugs at initial stage and therefore decreases bug fix cost
compared to acceptance testing.</li>
<li>Improves code quality.</li>
<li>Encourages writing testable code.</li>
</ul>
</div>
</div>
<div class="section" id="how-do-i-use-it">
<h2>How do I use it?<a class="headerlink" href="#how-do-i-use-it" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="start.html"><span class="doc">Getting Started</span></a> - for KUnit new users.</li>
<li><a class="reference internal" href="architecture.html"><span class="doc">KUnit Architecture</span></a> - KUnit architecture.</li>
<li><a class="reference internal" href="run_wrapper.html"><span class="doc">Run Tests with kunit_tool</span></a> - run kunit_tool.</li>
<li><a class="reference internal" href="run_manual.html"><span class="doc">Run Tests without kunit_tool</span></a> - run tests without kunit_tool.</li>
<li><a class="reference internal" href="usage.html"><span class="doc">Writing Tests</span></a> - write tests.</li>
<li><a class="reference internal" href="tips.html"><span class="doc">Tips For Writing KUnit Tests</span></a> - best practices with
examples.</li>
<li><a class="reference internal" href="api/index.html"><span class="doc">API Reference</span></a> - KUnit APIs
used for testing.</li>
<li><a class="reference internal" href="kunit-tool.html"><span class="doc">kunit_tool How-To</span></a> - kunit_tool helper
script.</li>
<li><a class="reference internal" href="faq.html"><span class="doc">Frequently Asked Questions</span></a> - KUnit common questions and
answers.</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="start.html" class="btn btn-neutral float-right" title="Getting Started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../kselftest.html" class="btn btn-neutral" title="Linux Kernel Selftests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'5.18.0-rc1-torvalds+',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>